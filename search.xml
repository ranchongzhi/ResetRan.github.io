<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>pythonçˆ¬è™«ï¼ˆ4ï¼‰â€”â€”XPathè¯­æ³•å’Œlxml</title>
      <link href="2020/07/07/python-spyder-4/"/>
      <url>2020/07/07/python-spyder-4/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‰é¢çš„pythonçˆ¬è™«ï¼ˆ1-3ï¼‰è®²äº†æ€ä¹ˆå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè·å¾—ç½‘é¡µçš„æºä»£ç ï¼Œä¸è¿‡ä¸€ä¸ªç½‘é¡µçš„æºä»£ç æœ‰å¾ˆå¤šéƒ¨åˆ†æˆ‘ä»¬éƒ½æ˜¯ç”¨ä¸ä¸Šçš„ï¼Œé‚£ç”¨ä»€ä¹ˆæ–¹æ³•èƒ½å¿«é€Ÿè·å–åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•°æ®å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼Œç½‘é¡µè§£æå°±æ´¾ä¸Šç”¨åœºäº†ï¼Œå¸¸ç”¨çš„è§£ææ–¹æ³•æœ‰ï¼šXPathè¯­å¥ã€beautifulsoup4åº“ã€reæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿™é‡Œå…ˆæ¥ä»‹ç»ç¬¬ä¸€ç§ã€‚</p><h1 id="XPath"><a href="#XPath" class="headerlink" title="XPath"></a>XPath</h1><h2 id="ä»€ä¹ˆæ˜¯XPath"><a href="#ä»€ä¹ˆæ˜¯XPath" class="headerlink" title="ä»€ä¹ˆæ˜¯XPath"></a>ä»€ä¹ˆæ˜¯XPath</h2><p>xpathï¼ˆXML Path Languageï¼‰æ˜¯ä¸€é—¨åœ¨ XML å’Œ HTML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ï¼Œå¯ç”¨æ¥åœ¨ XMLå’Œ HTML æ–‡æ¡£ä¸­å¯¹å…ƒç´ å’Œå±æ€§è¿›è¡Œéå†ã€‚ç®€å•ç‚¹è¯´ï¼Œè¿™ç©æ„å„¿å°±æ˜¯ç”¨æ¥å¸®æˆ‘ä»¬æå–ç½‘é¡µæºä»£ç ä¸­æˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®çš„ï¼Œæ¯”å¦‚æ ‡ç­¾å±æ€§å€¼ã€æ–‡æœ¬å€¼ã€é“¾æ¥ç­‰ç­‰éƒ½èƒ½é€šè¿‡XPathè¯­æ³•æå–ã€‚</p><h2 id="XPathè¯­æ³•çš„å¼€å‘å·¥å…·ï¼ˆChromeæ’ä»¶ï¼‰"><a href="#XPathè¯­æ³•çš„å¼€å‘å·¥å…·ï¼ˆChromeæ’ä»¶ï¼‰" class="headerlink" title="XPathè¯­æ³•çš„å¼€å‘å·¥å…·ï¼ˆChromeæ’ä»¶ï¼‰"></a>XPathè¯­æ³•çš„å¼€å‘å·¥å…·ï¼ˆChromeæ’ä»¶ï¼‰</h2><p>æˆ‘ä»¬æƒ³çœ‹XPathè¯­æ³•å®æ—¶çš„æ•ˆæœï¼Œæˆ‘è§‰å¾—ç›´æ¥åœ¨æµè§ˆå™¨é‡Œè¾¹å†™æ˜¯æœ€ç›´è§‚çš„æ–¹æ³•äº†ã€‚è°·æ­Œæµè§ˆå™¨çš„æ’ä»¶å°±å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ’ä»¶åå­—å«â€œXPath Helperâ€ï¼Œç›´æ¥å®‰è£…å°±è¡Œï¼Œå®‰è£…æ­¥éª¤å¯ä»¥ç™¾åº¦ï¼Œæ•™ç¨‹ä¸€å¤§æŠŠã€‚<br>æ¥çœ‹çœ‹ä½¿ç”¨ï¼Œè¿™é‡Œä»¥è±†ç“£ç½‘ä¸ºä¾‹å­ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594126565193.jpg"><br>æˆ‘å…ˆå†™ä¸€å¥åšä¸ªä¾‹å­ï¼ˆå–ç”µå½±æ±‰å¯†å°”é¡¿çš„è±†ç“£è¯„åˆ†ï¼‰ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594127192478.jpg"><br>åŒ¹é…å¥½ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠè¯­å¥å¤åˆ¶ä¸‹æ¥ç²˜è´´åˆ°ä»£ç ä¸­ã€‚</p><h2 id="XPathè¯­æ³•è¯¦è§£"><a href="#XPathè¯­æ³•è¯¦è§£" class="headerlink" title="XPathè¯­æ³•è¯¦è§£"></a>XPathè¯­æ³•è¯¦è§£</h2><p>å…³äºXPathçš„è¯­æ³•ä»‹ç»æœ‰å¾ˆå¤šï¼Œè¿™é‡Œç®€å•ç½—åˆ—ï¼š</p><h3 id="é€‰å–èŠ‚ç‚¹"><a href="#é€‰å–èŠ‚ç‚¹" class="headerlink" title="é€‰å–èŠ‚ç‚¹"></a>é€‰å–èŠ‚ç‚¹</h3><table><thead><tr><th align="center">è¡¨è¾¾å¼</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">nodename</td><td align="center">é€‰å–æ­¤èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</td></tr><tr><td align="center">/</td><td align="center">ä»æ ¹èŠ‚ç‚¹é€‰å–</td></tr><tr><td align="center">//</td><td align="center">ä»åŒ¹é…é€‰æ‹©çš„å½“å‰èŠ‚ç‚¹é€‰æ‹©æ–‡æ¡£ä¸­çš„èŠ‚ç‚¹ï¼Œè€Œä¸è€ƒè™‘å®ƒä»¬çš„ä½ç½®</td></tr><tr><td align="center">.</td><td align="center">é€‰å–å½“å‰èŠ‚ç‚¹</td></tr><tr><td align="center">..</td><td align="center">é€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</td></tr><tr><td align="center">@</td><td align="center">é€‰å–å±æ€§</td></tr></tbody></table><h3 id="è°“è¯­"><a href="#è°“è¯­" class="headerlink" title="è°“è¯­"></a>è°“è¯­</h3><p>è°“è¯­ç”¨æ¥æŸ¥æ‰¾æŸä¸ªç‰¹å®šçš„èŠ‚ç‚¹æˆ–è€…åŒ…å«æŸä¸ªæŒ‡å®šçš„å€¼çš„èŠ‚ç‚¹ï¼Œè¢«åµŒåœ¨æ–¹æ‹¬å·ä¸­ã€‚åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†å¸¦æœ‰è°“è¯­çš„ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¡¨è¾¾å¼çš„ç»“æœï¼š<br>|è·¯å¾„è¡¨è¾¾å¼ |æè¿°|<br>|:-:|:-:|<br>|/bookstore/book[1] |é€‰å– bookstore ä¸‹çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ |<br>|/bookstore/book[last()] |é€‰å– bookstore ä¸‹çš„å€’æ•°ç¬¬äºŒä¸ª book å…ƒç´ ã€‚|<br>|bookstore/book[position()&lt;<strong>3</strong>]| é€‰å– bookstore ä¸‹å‰é¢ä¸¤ä¸ªå­å…ƒç´ ã€‚|<br>|//book[@price] |é€‰å–æ‹¥æœ‰ price å±æ€§çš„ book å…ƒç´ |<br>|//book[@price=10] |é€‰å–æ‰€æœ‰å±æ€§ price ç­‰äº 10 çš„ book å…ƒç´ |<br>|//div[contains(@id,â€™1234â€™)] |é€‰å–æ‰€ä»¥å±æ€§ id ä¸­å«æœ‰ 1234 çš„ div å…ƒç´ |</p><h3 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦"></a>é€šé…ç¬¦</h3><table><thead><tr><th align="center">é€šé…ç¬¦</th><th align="center">æè¿°</th><th align="center">ç¤ºä¾‹</th><th align="center">ç»“æœ</th></tr></thead><tbody><tr><td align="center">*</td><td align="center">åŒ¹é…ä»»æ„èŠ‚ç‚¹</td><td align="center">/bookstore/*</td><td align="center">é€‰å– bookstore ä¸‹çš„æ‰€æœ‰å­å…ƒç´ ã€‚</td></tr><tr><td align="center">@*</td><td align="center">åŒ¹é…èŠ‚ç‚¹ä¸­çš„ä»»ä½•å±æ€§</td><td align="center">//book[@*]</td><td align="center">é€‰å–æ‰€æœ‰å¸¦æœ‰å±æ€§çš„ book å…ƒç´ ã€‚</td></tr></tbody></table><h3 id="é€‰å–å¤šä¸ªè·¯å¾„"><a href="#é€‰å–å¤šä¸ªè·¯å¾„" class="headerlink" title="é€‰å–å¤šä¸ªè·¯å¾„"></a>é€‰å–å¤šä¸ªè·¯å¾„</h3><p>é€šè¿‡åœ¨è·¯å¾„è¡¨è¾¾å¼ä¸­ä½¿ç”¨â€œ|â€è¿ç®—ç¬¦ï¼Œå¯ä»¥é€‰å–è‹¥å¹²ä¸ªè·¯å¾„ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š<br>**//bookstore/book | //book/title**ï¼ˆé€‰å–æ‰€æœ‰ book å…ƒç´ ä»¥åŠ book å…ƒç´ ä¸‹æ‰€æœ‰çš„ title å…ƒç´ ï¼‰</p><h3 id="XPathè¿ç®—ç¬¦"><a href="#XPathè¿ç®—ç¬¦" class="headerlink" title="XPathè¿ç®—ç¬¦"></a>XPathè¿ç®—ç¬¦</h3><table><thead><tr><th align="center">è¿ç®—ç¬¦</th><th align="center">æè¿°</th><th align="center">å®ä¾‹</th><th align="center">è¿”å›å€¼</th></tr></thead><tbody><tr><td align="center">|</td><td align="center">è®¡ç®—ä¸¤ä¸ªèŠ‚ç‚¹é›†</td><td align="center">//book | //cd</td><td align="center">è¿”å›æ‰€æœ‰æ‹¥æœ‰ book å’Œ cd å…ƒç´ çš„èŠ‚ç‚¹é›†</td></tr><tr><td align="center">+</td><td align="center">åŠ æ³•</td><td align="center">6 + 4</td><td align="center">10</td></tr><tr><td align="center">-</td><td align="center">å‡æ³•</td><td align="center">6 - 4</td><td align="center">2</td></tr><tr><td align="center">*</td><td align="center">ä¹˜æ³•</td><td align="center">6 * 4</td><td align="center">24</td></tr><tr><td align="center">div</td><td align="center">é™¤æ³•</td><td align="center">8 div 4</td><td align="center">2</td></tr><tr><td align="center">=</td><td align="center">ç­‰äº</td><td align="center">price=9.80</td><td align="center">å¦‚æœ price æ˜¯ 9.80ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœ price æ˜¯ 9.90ï¼Œåˆ™è¿”å›falseã€‚</td></tr><tr><td align="center">!=</td><td align="center">ä¸ç­‰äº</td><td align="center">price!=9.80</td><td align="center">å¦‚æœ price æ˜¯ 9.90ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœ price æ˜¯ 9.80ï¼Œåˆ™è¿”å› falseã€‚</td></tr><tr><td align="center">&lt;</td><td align="center">å°äº</td><td align="center">price&lt;9.80</td><td align="center">å¦‚æœpriceæ˜¯ 9.00ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœ price æ˜¯ 9.90ï¼Œåˆ™è¿”å› falseã€‚</td></tr><tr><td align="center">&lt;=</td><td align="center">å°äºæˆ–ç­‰äº</td><td align="center">price&lt;=9.80</td><td align="center">å¦‚æœ price æ˜¯ 9.00ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœ price æ˜¯ 9.90ï¼Œåˆ™è¿”å› falseã€‚</td></tr><tr><td align="center">&gt;</td><td align="center">å¤§äº</td><td align="center">price&gt;9.80</td><td align="center">å¦‚æœ price æ˜¯ 9.90ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœ price æ˜¯ 9.80ï¼Œåˆ™è¿”å› falseã€‚</td></tr><tr><td align="center">&gt;=</td><td align="center">å¤§äºæˆ–ç­‰äº</td><td align="center">price&gt;=9.80</td><td align="center">å¦‚æœ price æ˜¯ 9.90ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœ price æ˜¯ 9.70ï¼Œåˆ™è¿”å› falseã€‚</td></tr><tr><td align="center">or</td><td align="center">æˆ–</td><td align="center">price=9.80 orprice=9.70</td><td align="center">å¦‚æœ price æ˜¯ 9.80ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœ price æ˜¯ 9.50ï¼Œåˆ™è¿”å› falseã€‚</td></tr><tr><td align="center">and</td><td align="center">ä¸</td><td align="center">price&gt;9.00 andprice&lt;9.90</td><td align="center">å¦‚æœ price æ˜¯ 9.80ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœ price æ˜¯ 8.50ï¼Œåˆ™è¿”å› falseã€‚</td></tr><tr><td align="center">mod</td><td align="center">è®¡ç®—é™¤æ³•çš„ä½™æ•°</td><td align="center">5 mod 2</td><td align="center">1</td></tr></tbody></table><h1 id="lxml"><a href="#lxml" class="headerlink" title="lxml"></a>lxml</h1><h2 id="ä»€ä¹ˆæ˜¯lxml"><a href="#ä»€ä¹ˆæ˜¯lxml" class="headerlink" title="ä»€ä¹ˆæ˜¯lxml"></a>ä»€ä¹ˆæ˜¯lxml</h2><p>lxml æ˜¯ ä¸€ä¸ª HTML/XML çš„è§£æå™¨ï¼Œä¸»è¦çš„åŠŸèƒ½æ˜¯å¦‚ä½•è§£æå’Œæå– HTML/XML æ•°æ®ã€‚lxml å’Œæ­£åˆ™ä¸€æ ·ï¼Œä¹Ÿæ˜¯ç”¨ C å®ç°çš„ï¼Œæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„ Python HTML/XML è§£æå™¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¹‹å‰å­¦ä¹ çš„ XPath è¯­æ³•ï¼Œæ¥å¿«é€Ÿçš„å®šä½ç‰¹å®šå…ƒç´ ä»¥åŠèŠ‚ç‚¹ä¿¡æ¯ã€‚è¿™é‡Œé™„ä¸Š<a href="http://lxml.de/index.html">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="å…ˆæ¥è¯´ä¸€ä¸ªå‘"><a href="#å…ˆæ¥è¯´ä¸€ä¸ªå‘" class="headerlink" title="å…ˆæ¥è¯´ä¸€ä¸ªå‘"></a>å…ˆæ¥è¯´ä¸€ä¸ªå‘</h3><p>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨lxmlåº“é‡Œçš„etreeæ–¹æ³•ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨lxmlåº“çš„æ—¶å€™è¢«å‘çš„è›®æƒ¨ï¼Œç”±äºæˆ‘è£…çš„æ˜¯ç‰ˆæœ¬è¾ƒæ–°çš„lxmlåº“ï¼ˆ4.4.1ï¼‰ï¼Œè€ç‰ˆæœ¬çš„å¯¼å…¥æ–¹æ³•æ˜¯<code>from lxml import etree</code>ï¼Œå—¯ï¼Œæœä¸å…¶ç„¶æŠ¥é”™äº†ã€‚ç„¶åå°±æ˜¯å»æ‰¾ç­”æ¡ˆï¼Œæœ€åå‘ç°åœ¨æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬é‡Œï¼Œetreeè¢«å°è£…åˆ°lxmlä¸‹çš„htmlåº“é‡Œè¾¹äº†ï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·å¯¼å…¥ï¼š</p><pre class=" language-py"><code class="language-py">from lxml import htmletree = html.etree</code></pre><h2 id="å¤§è‡´æµç¨‹"><a href="#å¤§è‡´æµç¨‹" class="headerlink" title="å¤§è‡´æµç¨‹"></a>å¤§è‡´æµç¨‹</h2><p>ä½¿ç”¨requestsåº“å’Œlxmlåº“è¿›è¡Œçˆ¬è™«ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>å¯¼åº“ï¼Œè®¾ç½®è¯·æ±‚å¤´ï¼Œåˆ©ç”¨requestsåº“å‘ç½‘é¡µå‘é€è¯·æ±‚ï¼Œå¹¶å¾—åˆ°ä¸€ä¸ªresponseå¯¹è±¡</p></li><li><p>åˆ©ç”¨etreeå¯¹responseå¯¹è±¡è¿›è¡Œè§£æï¼Œå¾—åˆ°ä¸€ä¸ªlxml.etree._Elementå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ä»¥ä½¿ç”¨xpathè¯­æ³•è¿›è¡Œæå–ä¿¡æ¯</p></li><li><p>åˆ©ç”¨xpathè¯­æ³•å¯¹lxml.etree._Elementå¯¹è±¡è¿›è¡Œä¿¡æ¯æå–</p></li><li><p>å°†æå–çš„ä¿¡æ¯è¿›è¡Œå¤„ç†</p><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>è¿™é‡Œåˆ©ç”¨requestsåº“å’Œlxmlåº“æ¥çˆ¬å–è±†ç“£ç½‘ç»å…¸çš„ç”µå½±æ’åå‰10çš„ç”µå½±ä¿¡æ¯ï¼š</p></li><li><p>å¯¼å…¥ç›¸å…³æ¨¡å—ï¼š</p><pre class=" language-py"><code class="language-py">import requestsfrom lxml import htmletree = html.etree</code></pre></li><li><p>è®¾ç½®ä¸€äº›å‚æ•°</p><pre class=" language-py"><code class="language-py">headers = &#123; "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 "               "(KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36"&#125;#è¯·æ±‚å¤´url = "https://movie.douban.com/chart"#ç›®æ ‡é“¾æ¥movies = []#ç”¨äºä¿å­˜ç”µå½±ä¿¡æ¯</code></pre></li><li><p>requestsåº“è¯·æ±‚</p><pre class=" language-py"><code class="language-py"># å‘æŒ‡å®šé¡µæ•°å‘èµ·è¯·æ±‚ï¼Œå¹¶è¿”å›resopnseå¯¹è±¡response = requests.get(url, headers=headers)</code></pre></li><li><p>etreeå¯¹responseå¯¹è±¡è¿›è¡Œè§£æ</p><pre class=" language-py"><code class="language-py">html = etree.HTML(response.text)tables = html.xpath("//table")</code></pre></li><li><p>ç”¨xpathæå–ä¿¡æ¯å¹¶ä¿å­˜</p><pre class=" language-py"><code class="language-py">for table in tables: detail_herf = table.xpath('.//a[@class="nbg"]/@href')[0] name = table.xpath(".//a[@class='nbg']/@title")[0] post_url = table.xpath(".//img/@src")[0] nums = table.xpath(".//span[@class='rating_nums']/text()")[0] movie = &#123;     "href": detail_herf,#è¯¦æƒ…é“¾æ¥     "name": name,#ç”µå½±å     "post_url": post_url,#æµ·æŠ¥é“¾æ¥     "nums": nums#è¯„åˆ† &#125; print(movie) movies.append(movie)</code></pre><p>è¿è¡Œï¼Œç»“æœå¦‚ä¸‹å›¾ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594696787504.jpg"><br>æœ€åï¼Œå†è´´ä¸€ä¸‹å®Œæ•´ä»£ç ï¼š</p><pre class=" language-py"><code class="language-py"># çˆ¬å–è±†ç“£ç”µå½±ç»å…¸å½±ç‰‡æ’åimport requestsfrom lxml import html</code></pre></li></ol><p>etree = html.etree</p><p>headers = {<br>    â€œUser-Agentâ€: â€œMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 â€œ<br>                  â€œ(KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36â€<br>}<br>url = â€œ<a href="https://movie.douban.com/chart&quot;">https://movie.douban.com/chart&quot;</a><br>movies = []<br>n = 1</p><h1 id="å‘æŒ‡å®šé¡µæ•°å‘èµ·è¯·æ±‚ï¼Œå¹¶è¿”å›resopnseå¯¹è±¡"><a href="#å‘æŒ‡å®šé¡µæ•°å‘èµ·è¯·æ±‚ï¼Œå¹¶è¿”å›resopnseå¯¹è±¡" class="headerlink" title="å‘æŒ‡å®šé¡µæ•°å‘èµ·è¯·æ±‚ï¼Œå¹¶è¿”å›resopnseå¯¹è±¡"></a>å‘æŒ‡å®šé¡µæ•°å‘èµ·è¯·æ±‚ï¼Œå¹¶è¿”å›resopnseå¯¹è±¡</h1><p>response = requests.get(url, headers=headers)</p><p>html = etree.HTML(response.text)<br>tables = html.xpath(â€œ//tableâ€)</p><p>for table in tables:<br>#è¿™ä¸ªåœ°æ–¹å¯ä»¥å€ŸåŠ©å‰é¢ä»‹ç»çš„è°·æ­Œæµè§ˆå™¨æ’ä»¶æ¥æ£€æŸ¥åŒ¹é…æ˜¯å¦æ­£ç¡®<br>    detail_herf = table.xpath(â€˜.//a[@class=â€nbgâ€]/@hrefâ€™)[0]<br>    name = table.xpath(â€œ.//a[@class=â€™nbgâ€™]/@titleâ€)[0]<br>    post_url = table.xpath(â€œ.//img/@srcâ€)[0]<br>    nums = table.xpath(â€œ.//span[@class=â€™rating_numsâ€™]/text()â€)[0]</p><pre><code>movie = &#123;    &quot;href&quot;: detail_herf,    &quot;name&quot;: name,    &quot;post_url&quot;: post_url,    &quot;nums&quot;: nums&#125;print(movie)movies.append(movie)</code></pre><pre><code># æ€»ç»“ä¸€ä¸‹å—¯ï¼Œæ€»çš„çœ‹æ¥ï¼Œå†™ä¸ªå°çˆ¬è™«å…¶å®æ˜¯å¾ˆç®€å•çš„ï¼Œxpathè¯­æ³•ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œä½†ä»…æŒæ¡è¿™äº›æ˜¯ä¸å¤Ÿçš„ï¼Œæ— æ³•å†™å‡ºå¾ˆdiaoçš„çˆ¬è™«ï¼Œè¿˜æœ‰è›®å¤šä¸œè¥¿è¦å­¦ä¹ ï¼</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonçˆ¬è™«ï¼ˆ3ï¼‰â€”â€”cookieä¸requestsåº“</title>
      <link href="2020/07/05/python-spyder-3/"/>
      <url>2020/07/05/python-spyder-3/</url>
      
        <content type="html"><![CDATA[<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><p>åœ¨ç½‘ç«™ä¸­ï¼Œhttpè¯·æ±‚æ˜¯æ— çŠ¶æ€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å³ä½¿ç¬¬ä¸€æ¬¡å’ŒæœåŠ¡å™¨è¿æ¥åå¹¶ä¸”ç™»å½•æˆåŠŸåï¼Œç¬¬äºŒæ¬¡è¯·æ±‚æœåŠ¡å™¨ä¾ç„¶ä¸èƒ½çŸ¥é“å½“å‰è¯·æ±‚æ˜¯å“ªä¸ªç”¨æˆ·ã€‚cookie çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€æ¬¡ç™»å½•åæœåŠ¡å™¨è¿”å›ä¸€äº›æ•°æ®ï¼ˆcookieï¼‰ç»™æµè§ˆå™¨ï¼Œç„¶åæµè§ˆå™¨ä¿å­˜åœ¨æœ¬åœ°ï¼Œå½“è¯¥ç”¨æˆ·å‘é€ç¬¬äºŒæ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨çš„æŠŠä¸Šæ¬¡è¯·æ±‚å­˜å‚¨çš„ cookie æ•°æ®è‡ªåŠ¨çš„æºå¸¦ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é€šè¿‡æµè§ˆå™¨æºå¸¦çš„æ•°æ®å°±èƒ½åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å“ªä¸ªäº†ã€‚cookie å­˜å‚¨çš„æ•°æ®é‡æœ‰é™ï¼Œä¸åŒçš„æµè§ˆå™¨æœ‰ä¸åŒçš„å­˜å‚¨å¤§å°ï¼Œä½†ä¸€èˆ¬ä¸è¶…è¿‡ 4KBã€‚å› æ­¤ä½¿ç”¨ cookie åªèƒ½å­˜å‚¨ä¸€äº›å°é‡çš„æ•°æ®ã€‚<br>cookieçš„ä¸€èˆ¬æ ¼å¼å¦‚ä¸‹ï¼š<br><code>Set-Cookie: NAME=VALUEï¼›Expires/Max-age=DATEï¼›Path=PATHï¼›Domain=DOMAIN_NAMEï¼› SECURE</code><br>å‚æ•°çš„æè¿°å¦‚ä¸‹è¡¨ï¼š</p><table><thead><tr><th align="center">å‚æ•°å</th><th align="center">å‚æ•°æè¿°</th></tr></thead><tbody><tr><td align="center">NAME</td><td align="center">cookieçš„åå­—</td></tr><tr><td align="center">VALUE</td><td align="center">cookieçš„å€¼</td></tr><tr><td align="center">Expires</td><td align="center">cookieçš„è¿‡æœŸæ—¶é—´</td></tr><tr><td align="center">Path</td><td align="center">cookieä½œç”¨çš„è·¯å¾„</td></tr><tr><td align="center">Domain</td><td align="center">cookieä½œç”¨çš„åŸŸå</td></tr><tr><td align="center">SECURE</td><td align="center">æ˜¯å¦åªåœ¨httpsåè®®ä¸‹èµ·ä½œç”¨</td></tr></tbody></table><p>æµè§ˆå™¨ä¿å­˜äº†cookieï¼Œåé¢æ¯æ¬¡è®¿é—®æ—¶å°±æ–¹ä¾¿ï¼Œå¦‚æœè¦ç”¨ä»£ç æ¥å‘é‚£äº›éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®çš„ï¼ˆè¿›è¡Œæ›´å¤šæ“ä½œï¼‰ç½‘ç«™ï¼Œå°±éœ€è¦æŠŠcookieä¿¡æ¯ä¼ ç»™ç›®æ ‡æœåŠ¡å™¨ï¼Œç™»å½•è¯´ç™½äº†ä¹Ÿå°±æ˜¯è¦æœ‰cookieä¿¡æ¯ã€‚è¦è·å–cookieä¿¡æ¯ï¼Œé¦–å…ˆç¬¬ä¸€æƒ³æ³•å°±æ˜¯ç›´æ¥å»ç½‘ç«™ä¸Šç™»å½•ï¼Œç„¶åæŒ‰F12ï¼Œå°±èƒ½æ‰¾åˆ°cookieä¿¡æ¯ï¼Œä»¥äººäººç½‘ï¼ˆè®¿é—®æ¼”å‘˜å¤§é¹ä¸»é¡µï¼Œéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ï¼‰ä¸ºä¾‹å­ï¼š</p><pre class=" language-py"><code class="language-py">from urllib import request,parse#å…ˆæ³¨é‡Šæ‰cookieheaders=&#123;'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)\         AppleWebKit/537.36 (KHTML, like Gecko) \         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58',         # 'Cookie': 'ick_login=0ddad9f3-7fa0-4787-b916-5248ea8bb154; anonymid=kca04u42-rmbvi0; depovince=GW; _r01_=1; JSESSIONID=abchsJm52fkNjfdE5xImx; taihe_bi_sdk_uid=15a8a286885699bb6771e6212cc23aa5; taihe_bi_sdk_session=d83833b4a0fb72a6a466205c9329e993; ick=07bea91b-c6d1-4955-ad33-0980db50a672; t=c2a3a8d10309229b0555eb589c8482575; societyguester=c2a3a8d10309229b0555eb589c8482575; id=974715915; xnsid=dd9ddee7; XNESSESSIONID=6c76a75ff812; WebOnLineNotice_974715915=1; ver=7.0; loginfrom=null; jebe_key=060c174f-c2df-4669-9a2c-584b47a0e4a8%7C032338e00e79b21248aaa07a19d3e44d%7C1594009812653%7C1%7C1594009810029; jebe_key=060c174f-c2df-4669-9a2c-584b47a0e4a8%7C032338e00e79b21248aaa07a19d3e44d%7C1594009812653%7C1%7C1594009810031; wp_fold=0; jebecookies=ba0612a2-0ce7-4a4d-95d1-1f71f38ee8ce|||||'    &#125;url="http://www.renren.com/880151247/profile"req = request.Request(url ,headers=headers)resp = request.urlopen(req)with open('result.html','w',encoding = 'utf-8') as f:    f.writelines(resp.read().decode('utf-8'))</code></pre><p>è¿è¡Œä»£ç ï¼Œä¼šç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨æµè§ˆå™¨æ‰“å¼€å®ƒï¼Œå‘ç°ç»“æœå¦‚ä¸‹ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594010413908.jpg"><br>è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„é¡µé¢ï¼Œç„¶åå°†ä¸Šé¢çš„ä»£ç ä¸­cookieéƒ¨åˆ†å–æ¶ˆæ³¨é‡Šï¼Œå†è¿è¡Œï¼Œæ‰“å¼€result.htmlï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594010616018.jpg"><br>å¯ä»¥çœ‹åˆ°å‡ºç°äº†æˆ‘ä»¬æƒ³è¦çš„é¡µé¢ï¼è¿™å°±å¾ˆå¥½çš„ä½“ç°å‡ºcookieçš„ä½œç”¨ã€‚</p><h2 id="http-cookiejaræ¨¡å—"><a href="#http-cookiejaræ¨¡å—" class="headerlink" title="http.cookiejaræ¨¡å—"></a>http.cookiejaræ¨¡å—</h2><p>ä¸Šé¢ä»‹ç»äº†ä¸€ç§å¯è¡Œçš„æ–¹æ³•ï¼Œä¸è¿‡æˆ‘å†™çˆ¬è™«ä¸å°±æ˜¯ä¸ºäº†æé«˜æ•ˆç‡å˜›ï¼Œä½ è¿˜æ¯æ¬¡è®©æˆ‘æ‰‹åŠ¨å»å¤åˆ¶ç²˜è´´cookieä¿¡æ¯ï¼Ÿå†æƒ³æƒ³ï¼Œæˆ‘ä»¬èƒ½é€šè¿‡è¯·æ±‚è·å¾—çŠ¶æ€ç ä¹‹ç±»çš„ç½‘ç«™ä¿¡æ¯ï¼Œcookieä¹Ÿèƒ½ç”¨åŒæ ·çš„æ–¹å¼è·å¾—å‘€ï¼Œé‚£ä¸å°±å®Œäº‹äº†ã€‚è¿™é‡Œæˆ‘ä»¬çš„http.cookiejaræ¨¡å—å°±é—ªäº®ç™»åœºäº†ï¼Œè¯¥æ¨¡å—ä¸»è¦çš„ç±»æœ‰ CookieJarã€FileCookieJarã€MozillaCookieJarã€LWPCookieJarã€‚è¿™å››ä¸ªç±»çš„ä½œç”¨åˆ†åˆ«å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="center">ç±»å</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">CookieJar</td><td align="center">ç®¡ç† HTTP cookie å€¼ã€å­˜å‚¨ HTTP è¯·æ±‚ç”Ÿæˆçš„ cookieã€å‘ä¼ å‡ºçš„ HTTP è¯·æ±‚æ·»åŠ  cookie çš„å¯¹è±¡ã€‚æ•´ä¸ª cookie éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¯¹ CookieJar å®ä¾‹è¿›è¡Œåƒåœ¾å›æ”¶å cookieä¹Ÿå°†ä¸¢å¤±ã€‚</td></tr><tr><td align="center">FileCookieJar (filename,delayload=None,policy=None)</td><td align="center">ä» CookieJar æ´¾ç”Ÿè€Œæ¥ï¼Œç”¨åˆ›å»º FileCookieJar å®ä¾‹ï¼Œæ£€ç´¢ cookie ä¿¡æ¯å¹¶å°† cookie å­˜å‚¨åˆ°æ–‡ä»¶ä¸­ã€‚filename æ˜¯å­˜å‚¨cookieçš„æ–‡ä»¶åã€‚delayload ä¸º True æ—¶æ”¯æŒå»¶è¿Ÿè®¿é—®è®¿é—®æ–‡ä»¶ï¼Œå³åªæœ‰åœ¨éœ€è¦æ—¶æ‰è¯»å–æ–‡ä»¶æˆ–åœ¨æ–‡ä»¶ä¸­å­˜å‚¨æ•°æ®ã€‚</td></tr><tr><td align="center">MozillaCookieJar (filename,delayload=None,policy=None)</td><td align="center">ä» FileCookieJar æ´¾ç”Ÿè€Œæ¥ï¼Œåˆ›å»ºä¸ Mozilla æµè§ˆå™¨ cookies.txt å…¼å®¹çš„ FileCookieJar å®ä¾‹ã€‚</td></tr><tr><td align="center">LWPCookieJar (filename,delayload=None,policy=None)</td><td align="center">ä» FileCookieJar æ´¾ç”Ÿè€Œæ¥ï¼Œåˆ›å»ºä¸ libwww-perl æ ‡å‡†çš„ Set-Cookie3 æ–‡ä»¶æ ¼å¼å…¼å®¹çš„ FileCookieJar å®ä¾‹ã€‚</td></tr></tbody></table><p>å†ç”¨è¯¥æ¨¡å—å®ç°è®¿é—®äººäººç½‘å¤§é¹çš„ä¸»é¡µï¼š</p><pre class=" language-py"><code class="language-py">from urllib import request,parsefrom http.cookiejar import CookieJarheaders=&#123;'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)\         AppleWebKit/537.36 (KHTML, like Gecko) \         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58'    &#125;#åˆ›é€ ä¸€ä¸ªopenerdef get_opener():    cookjar=CookieJar()    handler=request.HTTPCookieProcessor(cookjar)    opener=request.build_opener(handler)    return opener#åˆ©ç”¨åˆ›é€ å¥½çš„openerå‘é€è¯·æ±‚ï¼Œè¯·æ±‚è¿”å›çš„æ•°æ®ä¸­å°±æœ‰cookieä¿¡æ¯ï¼Œä»–ä¼šä¿å­˜åˆ°cookiejarç±»ä¸­def save_cookie(opener):    login_url="http://www.renren.com/PLogin.do"    #è´¦å·å¯†ç ä¸èƒ½æ³„éœ²å•ŠğŸ˜‚ğŸ˜‚ğŸ˜‚    data=&#123;"email":"##########",          'password':"##########"        &#125;    res = request.Request(login_url,data= parse.urlencode(data).encode('utf8'),method='POST',headers=headers)    opener.open(res)#è®¿é—®å¤§é¹ä¸»é¡µdef get_profile(opener):    url="http://www.renren.com/880151247/profile"    res=request.Request(url,headers=headers)    resp=opener.open(res)    with open('result2.html','w',encoding = 'utf-8') as f:        f.writelines(resp.read().decode('utf-8'))if __name__=='__main__':    opener=get_opener()    save_cookie(opener)    get_profile(opener)</code></pre><p>ç»“æœå¦‚ä¸‹ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594037026162.jpg"></p><h2 id="cookieçš„ä¿å­˜ä¸åŠ è½½"><a href="#cookieçš„ä¿å­˜ä¸åŠ è½½" class="headerlink" title="cookieçš„ä¿å­˜ä¸åŠ è½½"></a>cookieçš„ä¿å­˜ä¸åŠ è½½</h2><h3 id="ä¿å­˜åˆ°æœ¬åœ°"><a href="#ä¿å­˜åˆ°æœ¬åœ°" class="headerlink" title="ä¿å­˜åˆ°æœ¬åœ°"></a>ä¿å­˜åˆ°æœ¬åœ°</h3><p>ä¿å­˜ cookie åˆ°æœ¬åœ°ï¼Œå¯ä»¥ä½¿ç”¨ MozillaCookieJar çš„ save æ–¹æ³•ï¼Œå¹¶ä¸”éœ€è¦æŒ‡å®šä¸€ä¸ªæ–‡ä»¶åã€‚è¿™é‡Œæˆ‘ä»¬å†ç”¨<strong><a href="http://httpbin.org/">http://httpbin.org</a></strong>è¿™ä¸ªç½‘ç«™æ¥æ¼”ç¤ºï¼Œè¯¥ç½‘ç«™å¯ä»¥è®©æˆ‘ä»¬è‡ªå®šä¹‰è¯¥ç½‘ç«™çš„cookieä¿¡æ¯ï¼Œè¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šå›¾ï¼›<br>ä¸»é¡µæ˜¯è¿™æ ·çš„ï¼Œå…ˆç‚¹å‡»cookieé€‰é¡¹:<br><img src="https://zmlzvt.coding-pages.com//post-images/1594041407808.jpg"><br>è·Ÿç€æ­¥éª¤æ¥ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594041429670.jpg"><br>è®¾ç½®å¥½åæ˜¯è¿™æ ·ï¼š<img src="https://zmlzvt.coding-pages.com//post-images/1594041443340.jpg"><br>å¦‚æœæƒ³é‡æ–°è®¾ç½®ï¼Œå¯ä»¥å…ˆæ¸…é™¤è¯¥ç½‘ç«™çš„cookieæ•°æ®å“¦ï¼Œæ€ä¹ˆæ¸…é™¤ç‚¹<a href="https://jingyan.baidu.com/article/09ea3ede592a34c0afde394e.html">å®ƒ</a></p><pre class=" language-py"><code class="language-py">from urllib import request,parsefrom http.cookiejar import MozillaCookieJarheaders=&#123;'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)\         AppleWebKit/537.36 (KHTML, like Gecko) \         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58'&#125;url="http://httpbin.org/cookies/set/python/spyder"cookiejar=MozillaCookieJar()handler=request.HTTPCookieProcessor(cookiejar)    opener=request.build_opener(handler)req=request.Request(url,headers=headers)opener.open(req)cookiejar.save('cookie.txt',ignore_discard=True,ignore_expires=True)#ç”±äºè¯¥ç½‘ç«™çš„cookieä¸ä¼šå¯èƒ½ä¼šè¿‡æœŸæˆ–è€…è¢«ä¸¢å¼ƒï¼Œæ‰€ä»¥è¿™é‡Œå¾—è®¾ç½®ä¸€ä¸‹å‚æ•°#ignore_discard çš„æ„æ€æ˜¯å³ä½¿ cookies å°†è¢«ä¸¢å¼ƒä¹Ÿå°†å®ƒä¿å­˜ä¸‹æ¥#ignore_expires çš„æ„æ€æ˜¯å¦‚æœ cookies å·²ç»è¿‡æœŸä¹Ÿå°†å®ƒä¿å­˜å¹¶ä¸”æ–‡ä»¶å·²å­˜åœ¨æ—¶å°†è¦†ç›–with open('cookie.txt','r') as f:    print(f.read())</code></pre><p>å¯ä»¥çœ‹åˆ°å·²ç»ç”Ÿæˆäº†cookie.txtæ–‡ä»¶ï¼Œé‡Œè¾¹å°±å­˜å‚¨ç€cookieä¿¡æ¯ï¼Œç»“æœå¦‚ä¸‹ï¼ˆå‡ºç°è¿™ç§æ ¼å¼åº”è¯¥æ˜¯saveæ–¹æ³•çš„é—®é¢˜ï¼‰ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594041878454.jpg"></p><h3 id="åŠ è½½cookieä¿¡æ¯"><a href="#åŠ è½½cookieä¿¡æ¯" class="headerlink" title="åŠ è½½cookieä¿¡æ¯"></a>åŠ è½½cookieä¿¡æ¯</h3><p>ç„¶åå†æ¥çœ‹çœ‹åŠ è½½cookieä¿¡æ¯ï¼Œè·Ÿä¸Šè¾¹å¾ˆç±»ä¼¼ï¼š</p><pre class=" language-py"><code class="language-py">headers=&#123;'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)\         AppleWebKit/537.36 (KHTML, like Gecko) \         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58'&#125;url="http://httpbin.org/cookies"cookiejar=MozillaCookieJar()cookiejar.load('cookie.txt',ignore_discard=True,ignore_expires=True)handler=request.HTTPCookieProcessor(cookiejar)    opener=request.build_opener(handler)req=request.Request(url,headers=headers)resp=opener.open(req)print(resp.read().decode())</code></pre><p>è¾“å‡ºï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594043291139.jpg"></p><h2 id="Requestsåº“"><a href="#Requestsåº“" class="headerlink" title="Requestsåº“"></a>Requestsåº“</h2><p>è™½ç„¶ Python çš„æ ‡å‡†åº“ä¸­ urllib æ¨¡å—å·²ç»åŒ…å«äº†å¹³å¸¸æˆ‘ä»¬ä½¿ç”¨çš„å¤§å¤šæ•°åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒçš„ APIä½¿ç”¨èµ·æ¥è®©äººæ„Ÿè§‰ä¸å¤ªå¥½ï¼Œè€Œ Requests å®£ä¼ æ˜¯ â€œHTTP for Humansâ€ï¼Œè¯´æ˜ä½¿ç”¨æ›´ç®€æ´æ–¹ä¾¿ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨requestsåº“æ¥å®ç°å’ŒurllibåŒæ ·çš„åŠŸèƒ½</p><h3 id="å‘é€getè¯·æ±‚"><a href="#å‘é€getè¯·æ±‚" class="headerlink" title="å‘é€getè¯·æ±‚"></a>å‘é€getè¯·æ±‚</h3><p>requestsåº“å‘é€getè¯·æ±‚ç›´æ¥ä½¿ç”¨getæ–¹æ³•å³å¯ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªresponseå¯¹è±¡ï¼Œå¦‚æœæƒ³æ·»åŠ  headersï¼Œå¯ä»¥ä¼ å…¥ headers å‚æ•°æ¥å¢åŠ è¯·æ±‚å¤´ä¸­çš„ headers ä¿¡æ¯ã€‚å¦‚æœè¦å°†å‚æ•°æ”¾åœ¨ url ä¸­ä¼ é€’ï¼Œå¯ä»¥åˆ©ç”¨params å‚æ•°</p><pre class=" language-py"><code class="language-py">import requestsurl="https://www.baidu.com"headers=&#123;'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)\         AppleWebKit/537.36 (KHTML, like Gecko) \         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58'&#125;kw=&#123;'wd':'é«˜è€ƒ'&#125;# params æ˜¯ä¸€ä¸ªå­—å…¸æˆ–è€…å­—ç¬¦ä¸²çš„æŸ¥è¯¢å‚æ•°ï¼Œå­—å…¸è‡ªåŠ¨è½¬æ¢ä¸º url ç¼–ç ï¼Œä¸éœ€è¦urlencode()response = requests.get(url, params = kw, headers = headers)# æŸ¥çœ‹å“åº”å†…å®¹ï¼Œresponse.text è¿”å›çš„æ˜¯ Unicode æ ¼å¼çš„æ•°æ®(python ä¼šåˆ©ç”¨è‡ªå·±çŒœæµ‹çš„ç¼–ç æ–¹å¼è§£ç ï¼Œå¯èƒ½ä¼šäº§ç”Ÿä¹±ç çš„é—®é¢˜)print(response.text)# æŸ¥çœ‹å“åº”å¤´éƒ¨å­—ç¬¦ç¼–ç print(response.encoding)# python ä¼šæ ¹æ®ç½‘é¡µå†…å®¹æ¥å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ç¼–ç print(response.apparent_encoding)# å¦‚æœ response.text ä¹±ç äº†ï¼Œå¯ä»¥å…ˆè®¾ç½®response.encoding= response.apparent_encoding# æŸ¥çœ‹å“åº”å†…å®¹ï¼Œresponse.content è¿”å›çš„å­—èŠ‚æµ bytes æ•°æ®print(response.content)print(response.content .decode('utf-8'))# æŸ¥çœ‹å®Œæ•´ url åœ°å€print(response.url)# æŸ¥çœ‹å“åº”ç print(response.status_code)#å¦‚æœç½‘é¡µè¿”å›çš„æ˜¯ jsonï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ response.json()è½¬æ¢ä¸º dict æˆ–è€… listprint(response.json())</code></pre><h3 id="å‘é€-POST-è¯·æ±‚"><a href="#å‘é€-POST-è¯·æ±‚" class="headerlink" title="å‘é€ POST è¯·æ±‚"></a>å‘é€ POST è¯·æ±‚</h3><p>æœ€åŸºæœ¬çš„ POST è¯·æ±‚å¯ä»¥ä½¿ç”¨ post æ–¹æ³•ï¼Œä¼ å…¥ data æ•°æ®ï¼ˆè¿™æ—¶å€™å°±ä¸è¦å†ä½¿ç”¨ urlencode è¿›è¡Œç¼–ç äº†ï¼Œç›´æ¥ä¼ å…¥ä¸€ä¸ªå­—å…¸è¿›å»å°±å¯ä»¥äº†ï¼‰ã€‚è¿”å›çš„ä¹Ÿæ˜¯responseå¯¹è±¡ï¼Œå¯ä»¥è¿›è¡Œçš„æ“ä½œåŒä¸Šã€‚æ¯”å¦‚è¯·æ±‚æ‹‰å‹¾ç½‘çš„æ•°æ®çš„ä»£ç ï¼š</p><pre class=" language-py"><code class="language-py">import requestsparams = &#123;'px': 'default',          'city': 'åŒ—äº¬',          'needAddtionalResult': 'false'&#125;data = &#123;'first': 'true',        'pn': 1,        'kd': 'python'&#125;headers = &#123;'Referer': "https://www.lagou.com/jobs/list_python",           'Cookie': 'JSEIONID=ABAAABA9B2BCC46',           'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)'&#125;url = 'https://www.lagou.com/jobs/list_python#filterBox'response = requests.post(url,                         params=params,                         headers=headers,                         data=data,                         timeout=5)response.encoding = 'UTF-8'print(response.text)</code></pre><h3 id="ä½¿ç”¨ä»£ç†"><a href="#ä½¿ç”¨ä»£ç†" class="headerlink" title="ä½¿ç”¨ä»£ç†"></a>ä½¿ç”¨ä»£ç†</h3><p>ä½¿ç”¨ requests æ·»åŠ ä»£ç†ä¹Ÿéå¸¸ç®€å•ï¼Œåªè¦åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸­ï¼ˆæ¯”å¦‚ get æˆ–è€… postï¼‰ä¼ é€’ proxieså‚æ•°å³å¯ï¼ˆæŒ‚äº†ç§‘å­¦ä¸Šç½‘è½¯ä»¶çš„æœ€å¥½å…ˆå…³ä¸€ä¸‹ï¼Œæˆ‘å°±å› ä¸ºæ²¡å…³è¢«å‘æƒ¨äº†ï¼‰ï¼š</p><pre class=" language-py"><code class="language-py">import requestsurl = 'http://www.httpbin.org/ip'proxy = &#123;    'http': '161.35.110.112:3128'&#125;resp_1 = requests.get(url, timeout=5)print(resp_1.text)resp_2 = requests.get(url, proxies=proxy, timeout=5)print(resp_2.text)</code></pre><p>è¾“å‡ºå¦‚ä¸‹ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1594091758109.jpg"></p><h3 id="ä½¿ç”¨requests-sessionä¿å­˜cookie"><a href="#ä½¿ç”¨requests-sessionä¿å­˜cookie" class="headerlink" title="ä½¿ç”¨requests.sessionä¿å­˜cookie"></a>ä½¿ç”¨requests.sessionä¿å­˜cookie</h3><p>ä¹‹å‰ä½¿ç”¨ urllib åº“ï¼Œæ˜¯å¯ä»¥ä½¿ç”¨ opener å‘é€å¤šä¸ªè¯·æ±‚ï¼Œå¤šä¸ªè¯·æ±‚ä¹‹é—´æ˜¯å¯ä»¥å…±äº« cookie çš„ã€‚é‚£ä¹ˆå¦‚æœä½¿ç”¨ requestsï¼Œä¹Ÿè¦è¾¾åˆ°å…±äº« cookie çš„ç›®çš„ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ requests åº“ç»™æˆ‘ä»¬æä¾›çš„ session å¯¹è±¡ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„ session ä¸æ˜¯ web å¼€å‘ä¸­çš„é‚£ä¸ª sessionï¼Œè¿™ä¸ªåœ°æ–¹åªæ˜¯ä¸€ä¸ªä¼šè¯çš„å¯¹è±¡è€Œå·²ã€‚è¿˜æ˜¯ä»¥ç™»å½•äººäººç½‘ä¸ºä¾‹ï¼Œä½¿ç”¨ requests æ¥å®ç°ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-py"><code class="language-py">import requestsurl = "http://www.renren.com/PLogin.do"data = &#123;"email": "970138074@qq.com", 'password': "pythonspider"&#125;headers = &#123;    'UserAgent': "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36"&#125;# ç™»å½•session = requests.session()session.post(url, data=data, headers=headers)# è®¿é—®å¤§é¹ä¸ªäººä¸­å¿ƒresp = session.get('http://www.renren.com/880151247/profile')print(resp.status_code)#è¾“å‡ºï¼š200</code></pre><h2 id="æ€»ç»“ä¸€ä¸‹"><a href="#æ€»ç»“ä¸€ä¸‹" class="headerlink" title="æ€»ç»“ä¸€ä¸‹"></a>æ€»ç»“ä¸€ä¸‹</h2><p>ä¸ªäººæ„Ÿè§‰ä½¿ç”¨æ–¹é¢ç¡®å®requestsåº“æ¯”èµ·urllibçš„APIæ¥å£è¦èˆ’é€‚è®¸å¤šï¼Œæ‰€ä»¥ä»¥åèƒ½ç”¨requestsä¿ºå°±ä¸ç”¨urllibğŸ¤£ğŸ¤£ğŸ¤£</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonçˆ¬è™«ï¼ˆ2ï¼‰â€”â€”urllibåº“</title>
      <link href="2020/07/02/python-spyder-2/"/>
      <url>2020/07/02/python-spyder-2/</url>
      
        <content type="html"><![CDATA[<h2 id="urllibåº“ç®€ä»‹"><a href="#urllibåº“ç®€ä»‹" class="headerlink" title="urllibåº“ç®€ä»‹"></a>urllibåº“ç®€ä»‹</h2><p>urllib åº“æ˜¯ Python ä¸­ä¸€ä¸ªæœ€åŸºæœ¬çš„ç½‘ç»œè¯·æ±‚åº“ã€‚å¯ä»¥æ¨¡æ‹Ÿæµè§ˆå™¨çš„è¡Œä¸ºï¼Œå‘æŒ‡å®šçš„æœåŠ¡å™¨å‘ é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶å¯ä»¥ä¿å­˜æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚</p><h2 id="urlopenå‡½æ•°"><a href="#urlopenå‡½æ•°" class="headerlink" title="urlopenå‡½æ•°"></a>urlopenå‡½æ•°</h2><p>åœ¨python3çš„<code>urllib</code>åº“ä¸­ï¼Œæ‰€æœ‰å’Œç½‘ç»œè¯·æ±‚ç›¸å…³çš„æ–¹æ³•ï¼Œéƒ½è¢«é›†æˆåˆ°<code>urllib.request</code>æ¨¡å—ä¸‹äº†ï¼Œè¯¥å‡½æ•°çš„ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p><p><code>urllib.request.urlopen(url, data=None, [timeout, ]*, cafile=None, capath=None, cadefault=False, context=None)</code></p><p>å…¶ä¸­ï¼š</p><p><code>cafileã€capathã€cadefault</code> å‚æ•°ï¼šç”¨äºå®ç°å¯ä¿¡ä»»çš„ CA è¯ä¹¦çš„ HTTP è¯·æ±‚ã€‚ï¼ˆåŸºæœ¬ä¸Šå¾ˆå°‘ç”¨ï¼‰</p><p><code>context</code> å‚æ•°ï¼šå®ç° SSL åŠ å¯†ä¼ è¾“ã€‚ï¼ˆåŸºæœ¬ä¸Šå¾ˆå°‘ç”¨ï¼‰</p><p>æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬å…³æ³¨å‰é¢å‡ ä¸ªå‚æ•°å°±å¯ä»¥äº†ï¼š</p><ul><li>URLï¼šæ‰€è¯·æ±‚çš„URL</li><li>dataï¼šè¯·æ±‚çš„dataï¼Œå¦‚æœè®¾ç½®äº†è¿™ä¸ªå‚æ•°ï¼Œè¯·æ±‚ä¼šå˜ä¸ºpostè¯·æ±‚</li><li>è¿”å›å€¼ï¼šè¿”å›å€¼æ˜¯ä¸€ä¸ªhttp.client.HTTPResponseå¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»æ–‡ä»¶å¥æŸ„å¯¹è±¡ï¼Œå®ƒä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š<ol><li>read(size):è¿”å›æŒ‡å®šå­—èŠ‚çš„æ•°ç›®ï¼Œé»˜è®¤ä¸ºå…¨éƒ¨ </li><li>readline()ï¼šè¿”å›ä¸€è¡Œ </li><li>readlines()ï¼šç”¨åˆ—è¡¨è¿”å›å…¨éƒ¨è¡Œ </li><li>getcode()ï¼šè¿”å›çŠ¶æ€ç ï¼Œ<code>resp.getcode()</code>ç­‰ä»·äº <code>resp.status</code> </li><li>getheaders()ï¼šè¿”å›å“åº”å¤´</li></ol></li></ul><p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> urllib <span class="token keyword">import</span> requesturl<span class="token operator">=</span><span class="token string">"http://www.baidu.com"</span>resp<span class="token operator">=</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œå°±ä¼šæ‰“å°å‡ºç™¾åº¦é¦–é¡µçš„htmlæºä»£ç ï¼Œè§ä¸‹å›¾ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1593685333801.png"></p><h2 id="request-urlretrieveå‡½æ•°"><a href="#request-urlretrieveå‡½æ•°" class="headerlink" title="request.urlretrieveå‡½æ•°"></a>request.urlretrieveå‡½æ•°</h2><p>è¿™ä¸ªæ–‡ä»¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†ç½‘é¡µä¸Šçš„æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°ï¼Œå°±æ¯”å¦‚ä¿å­˜ç™¾åº¦é¦–é¡µï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> urllib <span class="token keyword">import</span> requesturl<span class="token operator">=</span><span class="token string">"http://www.baidu.com"</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">'baidu.html'</span><span class="token punctuation">)</span></code></pre><p>è¿è¡Œä»£ç åï¼Œå°±ä¼šåœ¨ä»£ç æ–‡ä»¶åŒç›®å½•ä¸‹ç”Ÿæˆæˆ‘ä»¬æ‰€å‘½åçš„æ–‡ä»¶ï¼Œå¦‚å›¾ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1593685309150.png"><br>åŒç†ï¼Œä¹Ÿå¯ä»¥ç”¨æ­¤æ–¹æ³•ä¸‹è½½å›¾ç‰‡ï¼Œä»¥ä¸‹è½½ä¸€å¼ ç‹è€…è£è€€éŸ©ä¿¡çš„å›¾ç‰‡ä¸ºä¾‹ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> urllib <span class="token keyword">import</span> request<span class="token comment" spellcheck="true">#å›¾ç‰‡é“¾æ¥åªéœ€åœ¨ç½‘é¡µä¸­é¼ æ ‡å³é”®é€‰æ‹©å¤åˆ¶å›¾åƒé“¾æ¥å³å¯</span>url<span class="token operator">=</span><span class="token string">"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1107967462,1249145194&amp;fm=26&amp;gp=0.jpg"</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">"éŸ©ä¿¡.jpg"</span><span class="token punctuation">)</span></code></pre><p>è¿è¡Œåï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°æ‰€ä¸‹è½½çš„å›¾ç‰‡ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1593685278665.png"><br>æ‰“å¼€çœ‹ä¸€ä¸‹ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1593685038035.jpg#pic_centor" alt="Alt"></p><h2 id="parse-urlencodeå‡½æ•°å’Œparse-parse-qså‡½æ•°"><a href="#parse-urlencodeå‡½æ•°å’Œparse-parse-qså‡½æ•°" class="headerlink" title="parse.urlencodeå‡½æ•°å’Œparse.parse_qså‡½æ•°"></a>parse.urlencodeå‡½æ•°å’Œparse.parse_qså‡½æ•°</h2><p>ç”¨æµè§ˆå™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœ url ä¸­åŒ…å«äº†ä¸­æ–‡æˆ–è€…å…¶ä»–ç‰¹æ®Šå­—ç¬¦ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šè‡ªåŠ¨çš„ç»™æˆ‘ä»¬è¿›è¡Œç¼–ç ã€‚è€Œå¦‚æœä½¿ç”¨ä»£ç å‘é€è¯·æ±‚ï¼Œé‚£ä¹ˆå°±å¿…é¡»æ‰‹åŠ¨çš„è¿›è¡Œç¼–ç ï¼Œè¿™æ—¶å€™å°±åº”è¯¥ä½¿ç”¨ urlencode å‡½æ•°æ¥å®ç°ã€‚urlencode å¯ä»¥æŠŠå­—å…¸æ•°æ®è½¬æ¢ä¸º URL ç¼–ç çš„æ•°æ®ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-py"><code class="language-py">from urllib import parsedic1 = &#123;'name': 'å¼ ä¸‰','age' : '18','slogan' : "Hello world"&#125;dic2=parse.urlencode(dic1)print(dic2)#è¾“å‡ºå¦‚ä¸‹ï¼šname=%E5%BC%A0%E4%B8%89&age=18&slogan=Hello+world</code></pre><p>å¦‚æœä¸ç»è¿‡ç¼–ç ï¼Œå°±ç”¨urlopenæ–¹æ³•çš„è¯ï¼Œä¼šæŠ¥é”™ï¼š</p><pre class=" language-py"><code class="language-py">from urllib import request,parseresp = request.urlopen('http://www.baidu.com/s?wd=åˆ˜å¾·å')#æŠ¥é”™å¦‚ä¸‹ï¼šUnicodeEncodeError: 'ascii' codec can't encode characters in position 30-32: ordinal not in range(128)</code></pre><p>ç¼–ç ä¹‹åå°±å¯ä»¥äº†ï¼š</p><pre class=" language-py"><code class="language-py">from urllib import request,parseparms = &#123;'wd':'åˆ˜å¾·å'&#125;url = 'http://www.baidu.com/s'query_string = parse.urlencode(parms)print(query_string)url = url+'?'+query_stringresp = request.urlopen(url)print(resp.getcode())#è¾“å‡ºå¦‚ä¸‹ï¼šwd=%E5%88%98%E5%BE%B7%E5%8D%8E200</code></pre><p>parse.parse_qså‡½æ•°å°±æ˜¯å°†ç¼–ç åçš„æ•°æ®å†è½¬å˜å›æ¥çš„å‡½æ•°ï¼š</p><pre class=" language-py"><code class="language-py">from urllib import parsedic1 = &#123;'name': 'å¼ ä¸‰','age' : '18','slogan' : "Hello world"&#125;dic2=parse.urlencode(dic1)print(dic2)print(parse.parse_qs(dic2))#è¾“å‡ºå¦‚ä¸‹ï¼šname=%E5%BC%A0%E4%B8%89&age=18&slogan=Hello+world&#123;'name': ['å¼ ä¸‰'], 'age': ['18'], 'slogan': ['Hello world']&#125;#æ³¨æ„è¿”å›çš„æ•°æ®ç±»å‹</code></pre><h2 id="parse-urlparse-å’Œ-parse-urlsplit-å‡½æ•°"><a href="#parse-urlparse-å’Œ-parse-urlsplit-å‡½æ•°" class="headerlink" title="parse.urlparse å’Œ parse.urlsplit å‡½æ•°"></a>parse.urlparse å’Œ parse.urlsplit å‡½æ•°</h2><p>æœ‰æ—¶å€™æ‹¿åˆ°ä¸€ä¸ª urlï¼Œæƒ³è¦å¯¹è¿™ä¸ª url ä¸­çš„å„ä¸ªç»„æˆéƒ¨åˆ†è¿›è¡Œåˆ†å‰²ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨<br>urlparse æˆ–è€…æ˜¯ urlsplit æ¥è¿›è¡Œåˆ†å‰²ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-py"><code class="language-py">from urllib import request,parseurl = 'http://www.baidu.com/s?username=zhiliao'result1 = parse.urlsplit(url)result2 = parse.urlparse(url)print(result1)print(result2)</code></pre><p>ç»“æœå¦‚ä¸‹å›¾ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1593771183471.jpg"><br>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼šurlparse å’Œ urlsplit åŸºæœ¬ä¸Šæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚å”¯ä¸€ä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯ï¼Œurlparse é‡Œé¢å¤šäº†ä¸€ä¸ª params å±æ€§ï¼Œè€Œ urlsplit æ²¡æœ‰è¿™ä¸ª params å±æ€§ã€‚å¦‚æœå°†ä¸Šé¢ä»£ç çš„urlæ¢ä¸€ä¸‹å°±èƒ½çœ‹å‡ºåŒºåˆ«ï¼š</p><pre class=" language-py"><code class="language-py">from urllib import request,parseurl = 'http://www.baidu.com/s;hello?wd=python&username=abc#1'result1 = parse.urlsplit(url)result2 = parse.urlparse(url)print(result1)print(result2)</code></pre><p>ç»“æœï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1593773675938.jpg"><br>ä¸è¿‡paramså±æ€§å¾ˆå°‘ç”¨åˆ°ï¼Œæ‰€ä»¥è¿™ä¸¤ç§æ–¹æ³•åŸºæœ¬å¯ä»¥è§†ä¸ºç›¸åŒ</p><h2 id="ProxyHandler-å¤„ç†å™¨ï¼ˆä»£ç†è®¾ç½®ï¼‰"><a href="#ProxyHandler-å¤„ç†å™¨ï¼ˆä»£ç†è®¾ç½®ï¼‰" class="headerlink" title="ProxyHandler å¤„ç†å™¨ï¼ˆä»£ç†è®¾ç½®ï¼‰"></a>ProxyHandler å¤„ç†å™¨ï¼ˆä»£ç†è®¾ç½®ï¼‰</h2><p>å¾ˆå¤šç½‘ç«™ä¼šæ£€æµ‹æŸä¸€æ®µæ—¶é—´æŸä¸ª IP çš„è®¿é—®æ¬¡æ•°(é€šè¿‡æµé‡ç»Ÿè®¡ï¼Œç³»ç»Ÿæ—¥å¿—ç­‰)ï¼Œå¦‚æœè®¿é—®æ¬¡æ•°å¤šçš„ä¸åƒæ­£å¸¸äººï¼Œå®ƒä¼šç¦æ­¢è¿™ä¸ª IP çš„è®¿é—®ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€äº›ä»£ç†æœåŠ¡å™¨ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´æ¢ä¸€ä¸ªä»£ç†ï¼Œå°±ç®— IP è¢«ç¦æ­¢ï¼Œä¾ç„¶å¯ä»¥æ¢ä¸ª IP ç»§ç»­çˆ¬å–ã€‚urllib ä¸­é€šè¿‡ ProxyHandler æ¥è®¾ç½®ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ï¼Œä¸‹é¢ä»£ç è¯´æ˜å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰ openeræ¥ä½¿ç”¨ä»£ç†ï¼š</p><pre class=" language-py"><code class="language-py">import urlliburl = 'http://httpbin.org/ip'headers = &#123;'User-Agent':"Mozilla/5.0 (Macintosh; U; Mac OS X Mach-O; enUS; rv:2.0a) Gecko/20040614 Firefox/3.0.0 "&#125;req = urllib.request.Request(url,headers=headers)resp = urllib.request.urlopen(req,timeout = 5)print(resp.read().decode())handler = urllib.request.ProxyHandler(&#123;'http':'163.204.240.95:9999'&#125;)opener = urllib.request.build_opener(handler)resp = opener.open(url)print(resp.read().decode())</code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1593787948833.jpg"><br>å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬çš„å‘ç›®æ ‡æœåŠ¡å™¨å‘é€è¯·æ±‚çš„ipåœ°å€å·²ç»å˜äº†ï¼Œè¿™æ ·å°±èƒ½æœ‰æ•ˆé˜²æ­¢ç›®æ ‡æœåŠ¡å™¨å°æˆ‘ä»¬ipè€Œå¯¼è‡´çˆ¬è™«æ— æ³•å®Œæ•´è¿è¡Œã€‚</p><blockquote><p>ps:è¿™ä¸ªç½‘å€ï¼š<a href="http://httpbin.org/ip%EF%BC%8C%E8%83%BD%E5%B8%AE%E6%88%91%E4%BB%AC%E5%BF%AB%E9%80%9F%E6%9F%A5%E8%AF%A2%E6%88%91%E4%BB%AC%E7%9A%84ip%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BF%9D%E5%AD%98%E4%B8%8B%E6%9D%A5%E4%BD%BF%E7%94%A8%E5%93%A6">http://httpbin.org/ipï¼Œèƒ½å¸®æˆ‘ä»¬å¿«é€ŸæŸ¥è¯¢æˆ‘ä»¬çš„ipåœ°å€ï¼Œå¯ä»¥ä¿å­˜ä¸‹æ¥ä½¿ç”¨å“¦</a><br>å¸¸è§çš„ä»£ç†è·å–å¯ä»¥ç‚¹<a href="http://www.kuaidaili.com/">è¿™é‡Œ</a>å»çœ‹çœ‹ï¼Œå¯ä»¥ä½¿ç”¨å…è´¹çš„ä»£ç†ï¼Œå½“ç„¶ä½“éªŒè‚¯å®šæ²¡æœ‰ä»˜è´¹çš„ä»£ç†æ¥å¾—å¥½ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å°æ€»ç»“ä¸€ä¸‹ï¼Œç”¨urllibåº“åŸºæœ¬ä¸Šå°±å¯ä»¥å†™ä¸€äº›æ¯”è¾ƒç®€å•çš„çˆ¬è™«äº†ï¼Œä½†è¿™é‡Œæˆ‘ä»¬æƒ³è±¡ä¸­çš„é‚£ç§å¼ºå¤§çš„çˆ¬è™«è¿˜æ˜¯æœ‰äº›å·®è·ï¼Œæ‰€ä»¥è¿˜éœ€è¦ç»§ç»­å­¦ä¹ å‘€ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonçˆ¬è™«ï¼ˆ1ï¼‰â€”â€”å‰ç½®çŸ¥è¯†</title>
      <link href="2020/07/02/python-spyder-1/"/>
      <url>2020/07/02/python-spyder-1/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯çˆ¬è™«"><a href="#ä»€ä¹ˆæ˜¯çˆ¬è™«" class="headerlink" title="ä»€ä¹ˆæ˜¯çˆ¬è™«"></a>ä»€ä¹ˆæ˜¯çˆ¬è™«</h3><ul><li>é€šä¿—ç†è§£ï¼šçˆ¬è™«æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿäººç±»è¯·æ±‚ç½‘ç«™è¡Œä¸ºçš„ç¨‹åºã€‚å¯ä»¥è‡ªåŠ¨è¯·æ±‚ç½‘é¡µã€å¹¶æ•°æ®æŠ“å– ä¸‹æ¥ï¼Œç„¶åä½¿ç”¨ä¸€å®šçš„è§„åˆ™æå–æœ‰ä»·å€¼çš„æ•°æ®ã€‚</li><li>ä¸“ä¸šä»‹ç»å¯å‚è€ƒï¼š<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/5162711?fr=aladdin">ç™¾åº¦ç™¾ç§‘</a><h3 id="ä»€ä¹ˆæ˜¯-http-å’Œ-https-åè®®"><a href="#ä»€ä¹ˆæ˜¯-http-å’Œ-https-åè®®" class="headerlink" title="ä»€ä¹ˆæ˜¯ http å’Œ https åè®®"></a>ä»€ä¹ˆæ˜¯ http å’Œ https åè®®</h3></li><li>HTTP åè®®ï¼šå…¨ç§°æ˜¯ HyperText Transfer Protocolï¼Œä¸­æ–‡æ„æ€æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œ æ˜¯ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶ HTML é¡µé¢çš„æ–¹æ³•ã€‚æœåŠ¡å™¨ç«¯å£å·æ˜¯ 80 ç«¯å£ã€‚</li><li>HTTPS åè®®ï¼šæ˜¯ HTTP åè®®çš„åŠ å¯†ç‰ˆæœ¬ï¼Œåœ¨ HTTP ä¸‹åŠ å…¥äº† SSL å±‚ã€‚ï¼ˆæ•°æ®ä¼ è¾“æ›´åŠ å®‰ å…¨ï¼‰æœåŠ¡å™¨ç«¯å£å·æ˜¯ 443 ç«¯å£ã€‚<h3 id="åœ¨æµè§ˆå™¨ä¸­å‘é€ä¸€ä¸ª-http-è¯·æ±‚çš„è¿‡ç¨‹"><a href="#åœ¨æµè§ˆå™¨ä¸­å‘é€ä¸€ä¸ª-http-è¯·æ±‚çš„è¿‡ç¨‹" class="headerlink" title="åœ¨æµè§ˆå™¨ä¸­å‘é€ä¸€ä¸ª http è¯·æ±‚çš„è¿‡ç¨‹"></a>åœ¨æµè§ˆå™¨ä¸­å‘é€ä¸€ä¸ª http è¯·æ±‚çš„è¿‡ç¨‹</h3></li></ul><ol><li>å½“ç”¨æˆ·åœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥ä¸€ä¸ª URL å¹¶æŒ‰å›è½¦é”®ä¹‹åï¼Œæµè§ˆå™¨ä¼šå‘ HTTP æœåŠ¡å™¨ å‘é€ HTTP è¯·æ±‚ã€‚HTTP è¯·æ±‚ä¸»è¦åˆ†ä¸ºâ€œGetâ€å’Œâ€œPostâ€ä¸¤ç§æ–¹æ³•ã€‚ </li><li>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ URL <a href="http://www.baidu.com/">http://www.baidu.com</a> çš„æ—¶å€™ï¼Œæµè§ˆå™¨å‘é€ä¸€ä¸ª Request è¯· æ±‚å»è·å– <a href="http://www.baidu.com/">http://www.baidu.com</a> çš„ html æ–‡ä»¶ï¼ŒæœåŠ¡å™¨æŠŠ Response æ–‡ä»¶å¯¹è±¡å‘é€å›ç»™ æµè§ˆå™¨ã€‚</li><li>æµè§ˆå™¨åˆ†æ Response ä¸­çš„ HTMLï¼Œå‘ç°å…¶ä¸­å¼•ç”¨äº†å¾ˆå¤šå…¶ä»–æ–‡ä»¶ï¼Œæ¯”å¦‚ Images æ–‡ä»¶ï¼Œ CSS æ–‡ä»¶ï¼ŒJS æ–‡ä»¶ã€‚ æµè§ˆå™¨ä¼šè‡ªåŠ¨å†æ¬¡å‘é€ Request å»è·å–å›¾ç‰‡ï¼ŒCSS æ–‡ä»¶ï¼Œæˆ–è€… JS æ–‡ä»¶ã€‚ </li><li>å½“æ‰€æœ‰çš„æ–‡ä»¶éƒ½ä¸‹è½½æˆåŠŸåï¼Œç½‘é¡µä¼šæ ¹æ® HTML è¯­æ³•ç»“æ„ï¼Œå®Œæ•´çš„æ˜¾ç¤ºå‡ºæ¥äº†ã€‚<h3 id="url-è¯¦è§£"><a href="#url-è¯¦è§£" class="headerlink" title="url è¯¦è§£"></a>url è¯¦è§£</h3>URL æ˜¯ Uniform Resource Locator çš„ç®€å†™ï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ã€‚ä¸€ä¸ª URL ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š scheme://host:port/path/?query-string=xxx&amp;query-string=xxx#anchor </li></ol><ul><li><strong>scheme</strong>ï¼šä»£è¡¨çš„æ˜¯è®¿é—®çš„åè®®ï¼Œä¸€èˆ¬ä¸º http æˆ–è€… https ä»¥åŠ ftp ç­‰ã€‚ </li><li><strong>host</strong>ï¼šä¸»æœºåï¼ŒåŸŸåï¼Œæ¯”å¦‚ <a href="http://www.baidu.com./">www.baidu.comã€‚</a> </li><li><strong>port</strong>ï¼šç«¯å£å·ã€‚å½“ä½ è®¿é—®ä¸€ä¸ªç½‘ç«™çš„æ—¶å€™ï¼Œæµè§ˆå™¨é»˜è®¤ä½¿ç”¨ 80 ç«¯å£ã€‚ </li><li><strong>path</strong>ï¼šæŸ¥æ‰¾è·¯å¾„ã€‚æ¯”å¦‚ï¼š<a href="http://www.jianshu.com/trending/now%EF%BC%8C%E5%90%8E%E9%9D%A2%E7%9A%84">www.jianshu.com/trending/nowï¼Œåé¢çš„</a> trending/now å°±æ˜¯ pathã€‚ </li><li><strong>query-string</strong>ï¼šæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š<a href="http://www.baidu.com/s?wd=python%EF%BC%8C%E5%90%8E%E9%9D%A2%E7%9A%84">www.baidu.com/s?wd=pythonï¼Œåé¢çš„</a> wd=python å°±æ˜¯æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚ </li><li><strong>anchor</strong>ï¼šé”šç‚¹ï¼Œåå°ä¸€èˆ¬ä¸ç”¨ç®¡ï¼Œå‰ç«¯ç”¨æ¥åšé¡µé¢å®šä½çš„ã€‚(å°±ç›¸å½“äºä¸€ä¸ªé¡µé¢ä¸­æœ‰ç›® å½•ï¼Œç›®å½•çš„è·³è½¬å°±æ˜¯é”šç‚¹çš„ä½œç”¨) åœ¨æµè§ˆå™¨ä¸­è¯·æ±‚ä¸€ä¸ª urlï¼Œæµè§ˆå™¨ä¼šå¯¹è¿™ä¸ª url è¿›è¡Œä¸€ä¸ªç¼–ç ã€‚é™¤è‹±æ–‡å­—æ¯ï¼Œæ•°å­—å’Œéƒ¨åˆ†ç¬¦å· å¤–ï¼Œå…¶ä»–çš„å…¨éƒ¨ä½¿ç”¨ç™¾åˆ†å·+åå…­è¿›åˆ¶ç å€¼è¿›è¡Œç¼–ç ã€‚<h3 id="å¸¸è§è¯·æ±‚æ–¹æ³•"><a href="#å¸¸è§è¯·æ±‚æ–¹æ³•" class="headerlink" title="å¸¸è§è¯·æ±‚æ–¹æ³•"></a>å¸¸è§è¯·æ±‚æ–¹æ³•</h3>åœ¨ Http åè®®ä¸­ï¼Œå®šä¹‰äº†å…«ç§è¯·æ±‚æ–¹æ³•ã€‚è¿™é‡Œä»‹ç»ä¸¤ç§å¸¸ç”¨çš„è¯·æ±‚æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ get è¯·æ±‚å’Œ post è¯·æ±‚ã€‚ </li><li><strong>get è¯·æ±‚</strong>ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªä»æœåŠ¡å™¨è·å–æ•°æ®ä¸‹æ¥ï¼Œå¹¶ä¸ä¼šå¯¹æœåŠ¡å™¨èµ„æºäº§ç”Ÿä»»ä½•å½±å“ çš„æ—¶å€™ä¼šä½¿ç”¨ get è¯·æ±‚ã€‚ </li><li><strong>post è¯·æ±‚</strong>ï¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ˆç™»å½•ï¼‰ã€ä¸Šä¼ æ–‡ä»¶ç­‰ï¼Œä¼šå¯¹æœåŠ¡å™¨èµ„æºäº§ç”Ÿå½±å“çš„æ—¶å€™ ä¼šä½¿ç”¨ post è¯·æ±‚ã€‚ ä»¥ä¸Šæ˜¯åœ¨ç½‘ç«™å¼€å‘ä¸­å¸¸ç”¨çš„ä¸¤ç§æ–¹æ³•ã€‚å¹¶ä¸”ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šéµå¾ªä½¿ç”¨çš„åŸåˆ™ã€‚ä½†æ˜¯æœ‰çš„ ç½‘ç«™å’ŒæœåŠ¡å™¨ä¸ºäº†åšåçˆ¬è™«æœºåˆ¶ï¼Œä¹Ÿç»å¸¸ä¼šä¸æŒ‰å¸¸ç†å‡ºç‰Œï¼Œæœ‰å¯èƒ½ä¸€ä¸ªåº”è¯¥ä½¿ç”¨ get æ–¹ æ³•çš„è¯·æ±‚å°±ä¸€å®šè¦æ”¹æˆ post è¯·æ±‚ï¼Œè¿™ä¸ªè¦è§†æƒ…å†µè€Œå®šã€‚</li><li>æ›´å¤šçš„è¯·æ±‚ï¼Œå¯ä»¥å‚è€ƒï¼š<a href="https://www.runoob.com/http/http-methods.html">èœé¸Ÿæ•™ç¨‹</a><h3 id="å¸¸è§å“åº”çŠ¶æ€ç "><a href="#å¸¸è§å“åº”çŠ¶æ€ç " class="headerlink" title="å¸¸è§å“åº”çŠ¶æ€ç "></a>å¸¸è§å“åº”çŠ¶æ€ç </h3></li><li>200ï¼šè¯·æ±‚æ­£å¸¸ï¼ŒæœåŠ¡å™¨æ­£å¸¸çš„è¿”å›æ•°æ®ã€‚ </li><li>301ï¼šæ°¸ä¹…é‡å®šå‘ã€‚æ¯”å¦‚åœ¨è®¿é—® <a href="http://www.jingdong.com/">www.jingdong.com</a> çš„æ—¶å€™ä¼šé‡å®šå‘åˆ° <a href="http://www.jd.com./">www.jd.comã€‚</a></li><li>302ï¼šä¸´æ—¶é‡å®šå‘ã€‚æ¯”å¦‚åœ¨è®¿é—®ä¸€ä¸ªéœ€è¦ç™»å½•çš„é¡µé¢çš„æ—¶å€™ï¼Œè€Œæ­¤æ—¶æ²¡æœ‰ç™»å½•ï¼Œé‚£ä¹ˆå°± ä¼šé‡å®šå‘åˆ°ç™»å½•é¡µé¢ã€‚ </li><li>400ï¼šè¯·æ±‚çš„ url åœ¨æœåŠ¡å™¨ä¸Šæ‰¾ä¸åˆ°ã€‚æ¢å¥è¯è¯´å°±æ˜¯è¯·æ±‚ url é”™è¯¯ã€‚ </li><li>403ï¼šæœåŠ¡å™¨æ‹’ç»è®¿é—®ï¼Œæƒé™ä¸å¤Ÿã€‚ </li><li>500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚å¯èƒ½æ˜¯æœåŠ¡å™¨å‡ºç° bug äº†ã€‚<h3 id="è¯·æ±‚å¤´å¸¸è§å‚æ•°"><a href="#è¯·æ±‚å¤´å¸¸è§å‚æ•°" class="headerlink" title="è¯·æ±‚å¤´å¸¸è§å‚æ•°"></a>è¯·æ±‚å¤´å¸¸è§å‚æ•°</h3>åœ¨ http åè®®ä¸­ï¼Œå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ•°æ®åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªæ˜¯æŠŠæ•°æ®æ”¾åœ¨ url ä¸­ï¼Œç¬¬ äºŒä¸ªæ˜¯æŠŠæ•°æ®æ”¾åœ¨ body ä¸­ï¼ˆåœ¨ post è¯·æ±‚ä¸­ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå°±æ˜¯æŠŠæ•°æ®æ”¾åœ¨ head ä¸­ã€‚ è¿™é‡Œä»‹ç»åœ¨ç½‘ç»œçˆ¬è™«ä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ä¸€äº›è¯·æ±‚å¤´å‚æ•°ï¼š </li><li><strong>User-Agent</strong>ï¼šæµè§ˆå™¨åç§°ã€‚è¿™ä¸ªåœ¨ç½‘ç»œçˆ¬è™«ä¸­ç»å¸¸ä¼šè¢«ä½¿ç”¨åˆ°ã€‚è¯·æ±‚ä¸€ä¸ªç½‘é¡µçš„æ—¶å€™ï¼Œ æœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå‚æ•°å°±å¯ä»¥çŸ¥é“è¿™ä¸ªè¯·æ±‚æ˜¯ç”±å“ªç§æµè§ˆå™¨å‘é€çš„ã€‚å¦‚æœæˆ‘ä»¬æ˜¯é€šè¿‡çˆ¬è™« å‘é€è¯·æ±‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ User-Agent å°±æ˜¯ Pythonï¼Œè¿™å¯¹äºé‚£äº›æœ‰åçˆ¬è™«æœºåˆ¶çš„ç½‘ç«™æ¥è¯´ï¼Œ å¯ä»¥è½»æ˜“çš„åˆ¤æ–­ä½ è¿™ä¸ªè¯·æ±‚æ˜¯çˆ¬è™«ã€‚å› æ­¤æˆ‘ä»¬è¦ç»å¸¸è®¾ç½®è¿™ä¸ªå€¼ä¸ºä¸€äº›æµè§ˆå™¨çš„å€¼ï¼Œæ¥ ä¼ªè£…æˆ‘ä»¬çš„çˆ¬è™«ã€‚ </li><li><strong>Referer</strong>ï¼šè¡¨æ˜å½“å‰è¿™ä¸ªè¯·æ±‚æ˜¯ä»å“ªä¸ª url è¿‡æ¥çš„ã€‚è¿™ä¸ªä¸€èˆ¬ä¹Ÿå¯ä»¥ç”¨æ¥åšåçˆ¬è™«æŠ€æœ¯ã€‚ å¦‚æœä¸æ˜¯ä»æŒ‡å®šé¡µé¢è¿‡æ¥çš„ï¼Œé‚£ä¹ˆå°±ä¸åšç›¸å…³çš„å“åº”ã€‚ </li><li><strong>Cookie</strong>ï¼šhttp åè®®æ˜¯æ— çŠ¶æ€çš„ã€‚ä¹Ÿå°±æ˜¯åŒä¸€ä¸ªäººå‘é€äº†ä¸¤æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ²¡æœ‰èƒ½åŠ›çŸ¥é“ è¿™ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€ä¸ªäººã€‚å› æ­¤è¿™æ—¶å€™å°±ç”¨ cookie æ¥åšæ ‡è¯†ã€‚ä¸€èˆ¬å¦‚æœæƒ³è¦åšç™» å½•åæ‰èƒ½è®¿é—®çš„ç½‘ç«™ï¼Œé‚£ä¹ˆå°±éœ€è¦å‘é€ cookie ä¿¡æ¯äº†ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°â€”â€”numpyï¼ˆ2ï¼‰</title>
      <link href="2020/06/16/numpy-2/"/>
      <url>2020/06/16/numpy-2/</url>
      
        <content type="html"><![CDATA[<p>ç»§ç»­æ¥å­¦ä¹ numpyï¼š</p><h2 id="ä¸€ã€ç´¢å¼•å’Œåˆ‡ç‰‡"><a href="#ä¸€ã€ç´¢å¼•å’Œåˆ‡ç‰‡" class="headerlink" title="ä¸€ã€ç´¢å¼•å’Œåˆ‡ç‰‡"></a>ä¸€ã€ç´¢å¼•å’Œåˆ‡ç‰‡</h2><p>å‰é¢å­¦äº†ç”¨numpyæ¥åˆ›å»ºå„ç§å„æ ·çš„æ•°ç»„ï¼Œè¿™äº›æ•°ç»„éƒ½æ˜¯<code>ndarray</code>å¯¹è±¡ï¼Œéƒ½æ”¯æŒç´¢å¼•å’Œåˆ‡ç‰‡æ“ä½œã€‚<code>ndarray</code>å¯¹è±¡çš„ç´¢å¼•ä¸pythonä¸­çš„<code>list</code>åŸºæœ¬ä¸€è‡´ï¼š</p><pre class=" language-py"><code class="language-py">>>> import numpy as np>>> a=np.arange(1,6,1)>>> aarray([1, 2, 3, 4, 5])>>> a[0]#ä¹Ÿæ˜¯ä»0å¼€å§‹ç´¢å¼•1>>> a[4]5#å†çœ‹äºŒç»´æ•°ç»„ç´¢å¼•>>> aa=np.array([[1,2,3],[4,5,6],[7,8,9]])>>> aaarray([[1, 2, 3],       [4, 5, 6],       [7, 8, 9]]) >>> aa[0,0]1>>> aa[2,2]9</code></pre><p>æ›´é«˜ç»´åº¦æ•°ç»„å…ƒç´ çš„ç´¢å¼•å’Œä¸Šè¿°æ–¹å¼å¤§åŒå°å¼‚ï¼Œå†æ¥çœ‹åˆ‡ç‰‡ï¼Œå…ˆç”¨å’Œåˆ—è¡¨ä¸€æ ·çš„æ–¹æ³•æ¥è¯•è¯•ï¼š</p><pre class=" language-py"><code class="language-py">>>> b=np.arange(0,10,1)>>> barray([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])>>> b[4:]array([4, 5, 6, 7, 8, 9])>>> b[0:4]array([0, 1, 2, 3])>>> b[5:-1]array([5, 6, 7, 8])>>> b[0:5:2]array([0, 2, 4])</code></pre><p>å¯ä»¥å‘ç°ï¼Œè¿™ç§æ–¹æ³•æ˜¯å®Œå…¨å¯è¡Œçš„ï¼Œè¿˜å¯ä»¥åˆ©ç”¨pythonå†…ç½®å‡½æ•°<code>slice</code>è¿›è¡Œåˆ‡ç‰‡ï¼š</p><pre class=" language-py"><code class="language-py">>>> b[slice(1,8,2)]#å–å‡ºbä¸­ä»ç´¢å¼•1å¼€å§‹åˆ°ç´¢å¼•8çš„å…ƒç´ ï¼Œé—´éš”ä¸º2array([1, 3, 5, 7])</code></pre><p>çœ‹å®Œäº†ä¸€ç»´æ•°ç»„ï¼Œå†æ¥çœ‹çœ‹äºŒç»´æ•°ç»„å…ƒç´ çš„åˆ‡ç‰‡,äºŒç»´æ•°ç»„é‡Œè¾¹æˆ‘ä»¬ç»å¸¸æœ‰å–ä¸€æ•´åˆ—æˆ–è€…ä¸€æ•´è¡Œçš„éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨<code>...</code>å’Œ<code>:</code>æ¥è¿›è¡Œåˆ‡ç‰‡ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><pre class=" language-py"><code class="language-py">>>> bb=np.array([[1,2,3],[4,5,6],[7,8,9]])>>> bbarray([[1, 2, 3],       [4, 5, 6],       [7, 8, 9]])>>> bb[...,0]#å–æ•°ç»„bbé‡Œç¬¬ä¸€åˆ—å…ƒç´ array([1, 4, 7])>>> bb[:,0]#è·Ÿbb[...,0]ä½œç”¨ç›¸åŒarray([1, 4, 7])>>> bb[1,...]#å–æ•°ç»„bbé‡Œç¬¬ä¸€è¡Œå…ƒç´ array([4, 5, 6])>>> bb[1,:]#è·Ÿbb[1,...]ä½œç”¨ç›¸åŒarray([4, 5, 6])#è¿˜å¯ä»¥å–å‡ åˆ—æˆ–è€…å‡ è¡Œå…ƒç´ >>> bb[:,0:2]#å–ç¬¬0åˆ—å’Œç¬¬1åˆ—å…¨éƒ¨å…ƒç´ array([[1, 2],       [4, 5],       [7, 8]])>>> bb[0:2,:]#å–ç¬¬0è¡Œå’Œç¬¬1è¡Œçš„å…¨éƒ¨å…ƒç´ array([[1, 2, 3],       [4, 5, 6]])>>> bb[0:2,1:3]#å–ç¬¬0è¡Œå’Œç¬¬1è¡Œä¸Šç¬¬1åˆ—å’Œç¬¬2åˆ—çš„å…ƒç´ array([[2, 3],       [5, 6]])>>> bb[:]#å–å…¨éƒ¨å…ƒç´ array([[1, 2, 3],       [4, 5, 6],       [7, 8, 9]])</code></pre><h2 id="äºŒã€æ•°ç»„å˜å½¢"><a href="#äºŒã€æ•°ç»„å˜å½¢" class="headerlink" title="äºŒã€æ•°ç»„å˜å½¢"></a>äºŒã€æ•°ç»„å˜å½¢</h2><p>numpyé‡Œé¢çš„æ•°ç»„ï¼Œè¿˜å¯ä»¥è¿›è¡Œå˜å½¢æ“ä½œï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ“ä½œï¼š</p><h3 id="1-æ”¹å˜æ•°ç»„å½¢çŠ¶"><a href="#1-æ”¹å˜æ•°ç»„å½¢çŠ¶" class="headerlink" title="1.æ”¹å˜æ•°ç»„å½¢çŠ¶"></a>1.æ”¹å˜æ•°ç»„å½¢çŠ¶</h3><p>åœ¨numpyä¸­ï¼Œå°è£…äº†reshapeå‡½æ•°æ¥å¯¹æ•°ç»„è¿›è¡Œå˜å½¢æ“ä½œï¼Œå®ƒä¸€å…±æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š<code>numpy.reshape(arr, newshape, order=&#39;C&#39;)</code>ï¼Œå„ä¸ªå‚æ•°çš„æè¿°å¦‚ä¸‹ï¼š<br>|å‚æ•°|æè¿°|<br>|:-:|:-:|<br>|arr|éœ€è¦ä¿®æ”¹å½¢çŠ¶çš„æ•°ç»„|<br>|reshape|ä¿®æ”¹åæ•°ç»„çš„å½¢çŠ¶ï¼Œä¼ å…¥çš„åº”è¯¥æ˜¯æ•´æ•°æˆ–è€…æ•´æ•°æ•°ç»„,è€Œä¸”æ€»çš„å…ƒç´ æ•°é‡åº”è¯¥ä¸arrä¸€è‡´|<br>|order|â€™Câ€™ â€“ æŒ‰è¡Œï¼Œâ€™Fâ€™ â€“ æŒ‰åˆ—ï¼Œâ€™Aâ€™ â€“ åŸé¡ºåºï¼Œâ€™kâ€™ â€“ å…ƒç´ åœ¨å†…å­˜ä¸­çš„å‡ºç°é¡ºåº|<br>æ¥çœ‹ä¸€ä¸‹ä¾‹å­ï¼š</p><pre class=" language-py"><code class="language-py">>>> a1=np.arange(1,10,1)>>> a1array([1, 2, 3, 4, 5, 6, 7, 8, 9])>>> a2=np.reshape(a1,[3,3])>>> a2array([[1, 2, 3],       [4, 5, 6],       [7, 8, 9]])>>> a3=np.reshape(a1,[3,3],order='F')>>> a3array([[1, 4, 7],       [2, 5, 8],       [3, 6, 9]])>>> a4=np.reshape(a1,[3,3],order='A')>>> a4array([[1, 2, 3],       [4, 5, 6],       [7, 8, 9]])</code></pre><p>ä¹Ÿå¯ä»¥ä½¿ç”¨a1.reshape()æ¥è¿›è¡Œæ•°ç»„å˜å½¢ï¼Œè·Ÿä¸Šé¢çš„æ•ˆæœä¸€æ ·</p><pre class=" language-py"><code class="language-py">>>> a6=a1.reshape([3,3])>>> a6array([[1, 2, 3],       [4, 5, 6],       [7, 8, 9]])</code></pre><h3 id="2-è½¬ç½®"><a href="#2-è½¬ç½®" class="headerlink" title="2.è½¬ç½®"></a>2.è½¬ç½®</h3><p>çŸ©é˜µè½¬ç½®æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li><strong>transposeå‡½æ•°</strong></li><li><strong>ndarray.T</strong><br>äºŒè€…åŸºæœ¬ä¸Šç­‰ä»·ï¼Œæ¥çœ‹ä¸ªä¾‹å­ï¼š<pre class=" language-py"><code class="language-py">>>> b1=np.arange(1,9,1).reshape([2,4])>>> b1array([[1, 2, 3, 4],     [5, 6, 7, 8]])>>> b2=np.transpose(b1)>>> b2array([[1, 5],     [2, 6],     [3, 7],     [4, 8]])>>> b3=b1.T>>> b3array([[1, 5],     [2, 6],     [3, 7],     [4, 8]])</code></pre><h3 id="3-å¹¿æ’­ï¼ˆbroadcostï¼‰"><a href="#3-å¹¿æ’­ï¼ˆbroadcostï¼‰" class="headerlink" title="3.å¹¿æ’­ï¼ˆbroadcostï¼‰"></a>3.å¹¿æ’­ï¼ˆbroadcostï¼‰</h3>æˆ‘ä»¬çŸ¥é“ï¼ŒçŸ©é˜µè¿ç®—é€šå¸¸å¯¹çŸ©é˜µçš„ç»´åº¦æœ‰è¦æ±‚ï¼Œæ‰€ä»¥numpyé‡Œè¾¹ç”¨å¹¿æ’­æœºåˆ¶æ¥ä½¿çŸ©é˜µæ»¡è¶³ç»´åº¦è¦æ±‚ã€‚å½“è¿ç®—ä¸­çš„ 2 ä¸ªæ•°ç»„çš„å½¢çŠ¶ä¸åŒæ—¶ï¼Œnumpy å°†è‡ªåŠ¨è§¦å‘å¹¿æ’­æœºåˆ¶ã€‚å¦‚ï¼š<pre class=" language-py"><code class="language-py">>>> import numpy as np>>> a=np.array([[0,0,0],[1,1,1],[2,2,2],[3,3,3]])>>> aarray([[0, 0, 0],     [1, 1, 1],     [2, 2, 2],     [3, 3, 3]])>>> b=np.array([1,2,3])>>> a+barray([[1, 2, 3],     [2, 3, 4],     [3, 4, 5],     [4, 5, 6]]</code></pre>å¹¿æ’­æœºåˆ¶å†…å®¹è¾ƒå¤šï¼Œè¿™é‡Œåªç®€å•ä»‹ç»ï¼Œè¯¦ç»†å­¦ä¹ å¯å‚è€ƒ<a href="https://www.cnblogs.com/jiaxin359/p/9021726.html">è¿™ç¯‡åšå®¢</a><h2 id="ä¸‰ã€é€šç”¨å‡½æ•°"><a href="#ä¸‰ã€é€šç”¨å‡½æ•°" class="headerlink" title="ä¸‰ã€é€šç”¨å‡½æ•°"></a>ä¸‰ã€é€šç”¨å‡½æ•°</h2>é€šç”¨å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºufuncï¼Œæ˜¯ä¸€ç§åœ¨ndarrayæ•°æ®ä¸­è¿›è¡Œ<strong>é€å…ƒç´ æ“ä½œ</strong>çš„å‡½æ•°ã€‚æŸäº›ç®€å•å‡½æ•°æ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡é‡æ•°å€¼ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªæ ‡é‡æ•°å€¼ï¼Œè€Œé€šç”¨å‡½æ•°å°±æ˜¯å¯¹è¿™äº›ç®€å•å‡½æ•°çš„å‘é‡åŒ–å°è£…<h3 id="3-1ä¸€å…ƒé€šç”¨å‡½æ•°"><a href="#3-1ä¸€å…ƒé€šç”¨å‡½æ•°" class="headerlink" title="3.1ä¸€å…ƒé€šç”¨å‡½æ•°"></a>3.1ä¸€å…ƒé€šç”¨å‡½æ•°</h3>æœ‰å¾ˆå¤šufuncæ˜¯ç®€å•çš„é€å…ƒç´ è½¬æ¢ï¼Œæ¯”å¦‚<code>sqrt</code>æˆ–è€…<code>exp</code>å‡½æ•°ï¼š<pre class=" language-py"><code class="language-py">>>> arr=np.arange(10)>>> arrarray([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])>>> np.sqrt(arr)array([0.        , 1.        , 1.41421356, 1.73205081, 2.        ,     2.23606798, 2.44948974, 2.64575131, 2.82842712, 3.        ])>>> np.exp(arr)array([1.00000000e+00, 2.71828183e+00, 7.38905610e+00, 2.00855369e+01,     5.45981500e+01, 1.48413159e+02, 4.03428793e+02, 1.09663316e+03,     2.98095799e+03, 8.10308393e+03])</code></pre>è¿™ç±»å‡½æ•°æˆ‘ä»¬æŠŠå®ƒç§°ä¸ºä¸€å…ƒé€šç”¨å‡½æ•°ï¼Œåœ¨è¿™é‡Œåˆ—ä¸¾ä¸€äº›å¸¸è§çš„ä¸€å…ƒé€šç”¨å‡½æ•°ï¼š<table><thead><tr><th align="center">å‡½æ•°å</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">absã€fabs</td><td align="center">é€å…ƒç´ çš„è®¡ç®—æ•´æ•°ã€æµ®ç‚¹æ•°æˆ–è€…å¤æ•°çš„ç»å¯¹å€¼</td></tr><tr><td align="center">sqrt</td><td align="center">è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹æ ¹ï¼ˆä¸$arr^{0.5}$ç­‰ä»·ï¼‰</td></tr><tr><td align="center">square</td><td align="center">è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹ï¼ˆä¸$arr^2$ç­‰ä»·ï¼‰</td></tr><tr><td align="center">exp</td><td align="center">è®¡ç®—æ¯ä¸ªå…ƒç´ çš„ä»¥è‡ªç„¶åº•æ•°ä¸ºåº•çš„æŒ‡æ•°å€¼$e^2$</td></tr><tr><td align="center">logã€log10ã€log2ã€log1p</td><td align="center">åˆ†åˆ«å¯¹åº”ï¼šè‡ªç„¶å¯¹æ•°ï¼ˆeä¸ºåº•ï¼‰ã€å¯¹æ•°10ä¸ºåº•ã€å¯¹æ•°2ä¸ºåº•ã€$log(1+x)$</td></tr><tr><td align="center">sign</td><td align="center">è®¡ç®—æ¯ä¸ªå…ƒç´ çš„ç¬¦å·å€¼ï¼š1ï¼ˆè¡¨ç¤ºæ­£æ•°ï¼‰ã€0è¡¨ç¤ºæ•°å­—0ã€-1è¡¨ç¤ºå¤æ•°</td></tr><tr><td align="center">ceil</td><td align="center">è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å‘ä¸Šå–æ•´ï¼ˆå¤§äºç­‰äºç»™å®šæ•°å­—çš„æœ€å°æ•´æ•°ï¼‰</td></tr><tr><td align="center">floor</td><td align="center">è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å‘ä¸‹å–æ•´ï¼ˆå°äºç­‰äºç»™å®šæ•°å­—çš„æœ€å¤§æ•´æ•°ï¼‰</td></tr><tr><td align="center">rint</td><td align="center">å°†æ¯ä¸ªå…ƒç´ ä¿ç•™æ•´æ•°ä½ï¼Œå¹¶ä¿æŒdtype</td></tr><tr><td align="center">modf</td><td align="center">å°†æ¯ä¸ªå…ƒç´ çš„æ•´æ•°ä½å’Œå°æ•°ä½åˆ†å¼€ï¼Œå¹¶æŒ‰æ•°ç»„å½¢å¼è¿”å›</td></tr><tr><td align="center">isnan</td><td align="center">åˆ¤æ–­å„ä¸ªå…ƒç´ æ˜¯ä¸æ˜¯NANï¼ˆä¸æ˜¯ä¸€ä¸ªæ•°å€¼ï¼‰å¹¶è¿”å›å¸ƒå°”å€¼æ•°ç»„</td></tr><tr><td align="center">isfiniteã€isinf</td><td align="center">åˆ¤æ–­æ•°ç»„ä¸­å„å…ƒç´ æ˜¯å¦æœ‰é™ã€æ˜¯å¦æ— é™ï¼Œå¹¶è¿”å›å¸ƒå°”å€¼æ•°ç»„</td></tr><tr><td align="center">cosã€coshã€sinã€sinhã€tanã€tanh</td><td align="center">å¸¸è§„çš„åŒæ›²ä¸‰è§’å‡½æ•°</td></tr><tr><td align="center">arccosã€arccoshã€arcsinã€arcsinhã€arctanã€arctanh</td><td align="center">åä¸‰è§’å‡½æ•°</td></tr><tr><td align="center">logical_not</td><td align="center">å¯¹æ•°ç»„çš„å…ƒç´ æŒ‰ä½å–åï¼ˆä¸-arrç­‰ä»·ï¼‰</td></tr></tbody></table><h3 id="3-2äºŒå…ƒé€šç”¨å‡½æ•°"><a href="#3-2äºŒå…ƒé€šç”¨å‡½æ•°" class="headerlink" title="3.2äºŒå…ƒé€šç”¨å‡½æ•°"></a>3.2äºŒå…ƒé€šç”¨å‡½æ•°</h3>è¿˜æœ‰ä¸€äº›é€šç”¨å‡½æ•°ï¼Œæ¯”å¦‚addæˆ–è€…maximumåˆ™ä¼šæ¥æ”¶ä¸¤ä¸ªæ•°ç»„å¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ä½œä¸ºç»“æœï¼Œå› æ­¤æˆä¸ºäºŒå…ƒé€šç”¨å‡½æ•°ï¼Œåœ¨è¿™åˆ—ä¸¾ä¸€äº›ï¼š<table><thead><tr><th align="center">å‡½æ•°å</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">add</td><td align="center">å°†æ•°ç»„çš„å¯¹åº”å…ƒç´ ç›¸åŠ </td></tr><tr><td align="center">subtract</td><td align="center">åœ¨ç¬¬äºŒä¸ªæ•°ç»„ä¸­ï¼Œå°†ç¬¬ä¸€ä¸ªæ•°ç»„ä¸­åŒ…å«çš„å…ƒç´ å»é™¤</td></tr><tr><td align="center">multiply</td><td align="center">å°†æ•°ç»„çš„å¯¹åº”å…ƒç´ ç›¸ä¹˜</td></tr><tr><td align="center">devideã€floor_devide</td><td align="center">é™¤æˆ–æ•´é™¤ï¼ˆæ”¾å¼ƒä½™æ•°ï¼‰</td></tr><tr><td align="center">power</td><td align="center">å°†ç¬¬äºŒä¸ªæ•°ç»„çš„å…ƒç´ ä½œä¸ºç¬¬ä¸€ä¸ªæ•°ç»„å¯¹åº”å…ƒç´ çš„å¹‚æ¬¡æ–¹</td></tr><tr><td align="center">maximumã€fmax</td><td align="center">é€ä¸ªå…ƒç´ è®¡ç®—æœ€å¤§å€¼ï¼Œfmaxä¼šå¿½ç•¥NaN</td></tr><tr><td align="center">minimumã€fmin</td><td align="center">é€ä¸ªå…ƒç´ è®¡ç®—æœ€å°å€¼ï¼Œfminä¼šå¿½ç•¥NaN</td></tr><tr><td align="center">mod</td><td align="center">æŒ‰å…ƒç´ çš„æ±‚æ¨¡è®¡ç®—ï¼ˆå³æ±‚é™¤æ³•çš„ä½™æ•°ï¼‰</td></tr><tr><td align="center">copysign</td><td align="center">å°†ç¬¬ä¸€ä¸ªæ•°ç»„çš„ç¬¦å·å€¼æ”¹ä¸ºç¬¬äºŒä¸ªæ•°ç»„çš„ç¬¦å·å€¼</td></tr><tr><td align="center">greaterã€greater_equalã€lessã€less_equalã€equalã€not_equal</td><td align="center">è¿›è¡Œé€ä¸ªå…ƒç´ çš„æ¯”è¾ƒï¼Œè¿”å›å¸ƒå°”å€¼æ•°ç»„ï¼ˆåˆ†åˆ«ä¸æ•°å­¦æ“ä½œç¬¦<code>&gt;,&gt;=,&lt;,&lt;=,==,!=</code>å¯¹åº”æ•ˆæœä¸€è‡´ï¼‰</td></tr><tr><td align="center">logical_andã€logical_orã€logical_xor</td><td align="center">è¿›è¡Œé€ä¸ªå…ƒç´ çš„é€»è¾‘æ“ä½œï¼Œä¸é€»è¾‘æ“ä½œ`&amp;,</td></tr></tbody></table></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> numpy </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°â€”â€”numpyï¼ˆ1ï¼‰</title>
      <link href="2020/06/14/numpy-1/"/>
      <url>2020/06/14/numpy-1/</url>
      
        <content type="html"><![CDATA[<p>å­¦è¿‡pythonçš„äººåº”è¯¥éƒ½æ¥è§¦è¿‡<a href="https://baike.baidu.com/item/numpy/5678437?fr=aladdin"><strong>numpy</strong></a>è¿™ä¸ªæœ‰åçš„ç¬¬ä¸‰æ–¹åº“ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ”¯æŒå¤§é‡çš„ç»´åº¦æ•°ç»„ä¸çŸ©é˜µè¿ç®—ï¼Œæ­¤å¤–ä¹Ÿé’ˆå¯¹æ•°ç»„è¿ç®—æä¾›å¤§é‡çš„æ•°å­¦å‡½æ•°åº“ã€‚</p><h1 id="1-å®‰è£…numpy"><a href="#1-å®‰è£…numpy" class="headerlink" title="1.å®‰è£…numpy"></a>1.å®‰è£…numpy</h1><p>å®‰è£…æ–¹æ³•æœ‰ä¸¤ç§ï¼š</p><ul><li>pipå®‰è£…ï¼šç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œé”®å…¥<code>pip install numpy</code>å³å¯ï¼Œå¦‚æœé‡åˆ°å®‰è£…é€Ÿåº¦è¿‡æ…¢çš„æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘åˆ°æ¸…åé•œåƒæºä¸‹è½½å®‰è£…ã€‚</li><li>condaå®‰è£…ï¼Œåœ¨anaconda powershellé‡Œè¾“å…¥<code>conda install numpy</code>,é€Ÿåº¦æ…¢ä¹Ÿå¯ä»¥æ¢æºã€‚<br>æˆ‘è¿™é‡Œå·²ç»å®‰è£…å¥½äº†ï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š<br><img src="https://zmlzvt.coding-pages.com//post-images/1592147524509.jpg"><br>æ‰“å¼€idleéªŒè¯ä¸€ä¸‹å®‰è£…æ˜¯å¦æˆåŠŸï¼š<pre class=" language-py"><code class="language-py">>>> import numpy as np>>> np.__version__#æ‰“å°ç‰ˆæœ¬ä¿¡æ¯'1.16.5'>>> np.ones(5)#ç”Ÿæˆå€¼å…¨ä¸º1çš„æ•°ç»„array([1., 1., 1., 1., 1.])</code></pre>æ­£ç¡®ç”Ÿæˆäº†æ•°ç»„ï¼Œè¯´æ˜numpyå®‰è£…æˆåŠŸ<h1 id="2-åŸºç¡€æ“ä½œ"><a href="#2-åŸºç¡€æ“ä½œ" class="headerlink" title="2. åŸºç¡€æ“ä½œ"></a>2. åŸºç¡€æ“ä½œ</h1><h2 id="2-1é€šè¿‡ç»´åº¦åˆ›å»ºæ•°ç»„"><a href="#2-1é€šè¿‡ç»´åº¦åˆ›å»ºæ•°ç»„" class="headerlink" title="2.1é€šè¿‡ç»´åº¦åˆ›å»ºæ•°ç»„"></a>2.1é€šè¿‡ç»´åº¦åˆ›å»ºæ•°ç»„</h2>å…ˆçœ‹ç”±æŒ‡å®šç»´åº¦æ¥åˆ›å»ºæ•°ç»„çš„æ–¹æ³•ï¼š<pre class=" language-py"><code class="language-py">>>> a=np.array([1,2,3])#åˆ›å»ºä¸€ç»´æ•°ç»„>>> aarray([1, 2, 3]ï¼‰>>> b=np.array([[1,2,3],[4,5,6]])#åˆ›å»ºäºŒç»´æ•°ç»„ï¼Œé«˜ç»´åº¦åŒç†>>> barray([[1, 2, 3],     [4, 5, 6]])>>> np.zeros([3,3])#ç”ŸæˆæŒ‡å®šç»´åº¦çš„å€¼å…¨ä¸º0çš„æ•°ç»„array([[0., 0., 0.],     [0., 0., 0.],     [0., 0., 0.]])>>> np.ones([3,3])##ç”ŸæˆæŒ‡å®šç»´åº¦çš„å€¼å…¨ä¸º1çš„æ•°ç»„array([[1., 1., 1.],     [1., 1., 1.],     [1., 1., 1.]])>>> np.empty([3,3])#ç”ŸæˆæŒ‡å®šç»´åº¦çš„å€¼ä¸ºéšæœºæ•°çš„æ•°ç»„array([[1., 1., 1.],     [1., 1., 1.],     [1., 1., 1.]])>>> np.empty_like(b)#ç”Ÿæˆå’Œbæ•°ç»„åŒç»´åº¦çš„å€¼ä¸ºéšæœºæ•°çš„æ•°ç»„array([[0, 0, 0],     [0, 0, 0]])</code></pre>åœ¨å®é™…æ“ä½œä¸­ï¼Œé€šè¿‡ç”Ÿæˆaï¼Œbæ•°ç»„çš„æ–¹å¼æ¥åˆ›å»ºé«˜ç»´åº¦æ•°ç»„æ—¶ä¼šæ˜¾å¾—å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨<code>np.ones</code>æˆ–<code>np.zeros</code>æ¥ç”ŸæˆæŒ‡å®šç»´åº¦çš„æ•°ç»„ï¼Œç„¶åå¯¹å…¶ä¸­çš„å…ƒç´ è¿›è¡Œä¿®æ”¹ã€‚<h2 id="2-2é€šè¿‡æ•°å€¼èŒƒå›´åˆ›å»ºæ•°ç»„"><a href="#2-2é€šè¿‡æ•°å€¼èŒƒå›´åˆ›å»ºæ•°ç»„" class="headerlink" title="2.2é€šè¿‡æ•°å€¼èŒƒå›´åˆ›å»ºæ•°ç»„"></a>2.2é€šè¿‡æ•°å€¼èŒƒå›´åˆ›å»ºæ•°ç»„</h2><h3 id="2-2-1ç­‰å·®æ•°åˆ—"><a href="#2-2-1ç­‰å·®æ•°åˆ—" class="headerlink" title="2.2.1ç­‰å·®æ•°åˆ—"></a>2.2.1ç­‰å·®æ•°åˆ—</h3>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ•°å€¼èŒƒå›´æ¥åˆ›å»ºæ•°ç»„ï¼Œæ¯”å¦‚ç°åœ¨éœ€è¦ä¸€ä¸ªä»1åˆ°100çš„å…¬å·®ä¸º2çš„ç­‰å·®æ•°åˆ—ï¼Œé€šè¿‡å‰é¢çš„æ–¹æ³•ä¹Ÿå¯ä»¥åˆ›å»ºï¼ˆå…ˆç”ŸæˆæŒ‡å®šç»´åº¦çš„0æ•°ç»„ï¼Œå†åˆ©ç”¨å¾ªç¯è¿›è¡Œèµ‹å€¼ï¼‰ï¼Œè¿™æ ·ä¼šæ˜¾å¾—æ¯”è¾ƒç¹çï¼Œå¯ä»¥ä½¿ç”¨<code>arange</code>å‡½æ•°ï¼š<pre class=" language-py"><code class="language-py">#ä»¥ç”Ÿæˆ1åˆ°20çš„å…¬å·®ä¸º2çš„ç­‰å·®æ•°åˆ—ä¸ºä¾‹>>> np.arange(1,20,2)#array([ 1,  3,  5,  7,  9, 11, 13, 15, 17, 19])>>> np.arange(start=1,stop=20,step=2)#è¯¦ç»†å†™æ³•array([ 1,  3,  5,  7,  9, 11, 13, 15, 17, 19])>>> np.arange(1,20,1)array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,     18, 19])</code></pre><code>arange</code>å‡½æ•°ä¸­éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯èµ·å§‹ç‚¹ã€ç»ˆæ­¢ç‚¹å’Œæ­¥é•¿ï¼Œå¯ä»¥çœ‹å‡ºï¼šå³ä½¿æ­¥é•¿è®¾ç½®ä¸º1ï¼Œè¾“å‡ºçš„æ•°ç»„ä¹Ÿæ˜¯ä¸åŒ…æ‹¬ç»ˆæ­¢ç‚¹çš„ï¼Œæ‰€ä»¥<code>arange</code>å‡½æ•°çš„è¾“å…¥å¯ä»¥çœ‹åšä¸€ä¸ªå·¦é—­å³å¼€åŒºé—´ï¼Œå¦‚æœæƒ³è¦åŒ…æ‹¬ç»ˆæ­¢ç‚¹ï¼Œå¯ä»¥è®©ç»ˆæ­¢ç‚¹å¢å¤§ä¸€ä¸ªæ­¥é•¿ã€‚</li></ul><p>é™¤äº†<code>arange</code>å‡½æ•°ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>linspace</code>å‡½æ•°ä¹Ÿå¯ä»¥ç”Ÿæˆç­‰å·®æ•°åˆ—ï¼š</p><pre class=" language-py"><code class="language-py">#ä»¥ç”Ÿæˆ1åˆ°10çš„å…¬å·®ä¸º1çš„ç­‰å·®æ•°åˆ—ä¸ºä¾‹>>> np.linspace(1,10,10)array([ 1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9., 10.])>>> np.linspace(start=1,stop=10,num=10)#è¯¦ç»†å†™æ³•array([ 1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9., 10.])>>> np.linspace(1,10,10,endpoint=False)array([1. , 1.9, 2.8, 3.7, 4.6, 5.5, 6.4, 7.3, 8.2, 9.1])</code></pre><p><code>linspace</code>å‡½æ•°ä¸­éœ€è¦è‡³å°‘ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºèµ·å§‹ç‚¹ã€ç»ˆæ­¢ç‚¹å’Œè¦ç”Ÿæˆçš„ç­‰é—´è·ç‚¹çš„æ•°é‡ï¼Œè¿˜æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°<code>endpoint</code>ï¼Œå®ƒçš„é»˜è®¤å€¼ä¸º<code>True</code>ï¼Œè¡¨ç¤ºé»˜è®¤åŒ…æ‹¬ç»ˆæ­¢ç‚¹ï¼Œæ­¤æ—¶å¯å°†è¾“å…¥ç†è§£ä¸ºä¸€ä¸ªé—­åŒºé—´ï¼Œå°†å…¶è®¾ç½®ä¸º<code>False</code>åï¼Œè¾“å…¥åˆå˜æˆäº†ä¸€ä¸ªå·¦é—­å³å¼€åŒºé—´ã€‚</p><h3 id="2-2-2ç­‰æ¯”æ•°åˆ—"><a href="#2-2-2ç­‰æ¯”æ•°åˆ—" class="headerlink" title="2.2.2ç­‰æ¯”æ•°åˆ—"></a>2.2.2ç­‰æ¯”æ•°åˆ—</h3><p><code>numpy</code>åŒæ ·æœ‰å‡½æ•°æ¥åˆ›å»ºæ»¡è¶³éœ€è¦çš„ç­‰æ¯”æ•°åˆ—ï¼Œå‡½æ•°åå­—å«<code>logspace</code>ï¼Œè¯¥å‡½æ•°æœ‰<code>start</code>ã€<code>stop</code>ã€<code>num</code>ã€<code>endpoint</code>ã€<code>base</code>äº”ä¸ªå‚æ•°ï¼Œ<br>|å‚æ•°   |æè¿°|<br>|:-: | :-: |<br>|start       |è¡¨ç¤ºæ‰€ç”Ÿæˆæ•°åˆ—çš„èµ·å§‹å€¼ä¸º${base}^{start}$            |<br>|stop        |è¡¨ç¤ºæ‰€ç”Ÿæˆæ•°åˆ—çš„ç»ˆæ­¢å€¼ä¸º$base^{stop}$          |<br>|num        |è¦ç”Ÿæˆçš„ç­‰æ­¥é•¿çš„æ ·æœ¬æ•°é‡ï¼Œé»˜è®¤ä¸º50|<br>|endpoint|è¯¥å€¼ä¸º True æ—¶ï¼Œæ•°åˆ—ä¸­ä¸­åŒ…å«$base^{stop}$ å€¼ï¼Œåä¹‹ä¸åŒ…å«ï¼Œé»˜è®¤æ˜¯Trueã€‚|<br>|base|    å¯¹æ•° log çš„åº•æ•°ï¼Œé»˜è®¤å€¼ä¸º10|<br>å®ä¾‹å¦‚ä¸‹ï¼š</p><pre class=" language-py"><code class="language-py">#ç”Ÿæˆ1åˆ°10000çš„ç­‰å·®æ•°åˆ—>>> np.logspace(0,4,5)array([1.e+00, 1.e+01, 1.e+02, 1.e+03, 1.e+04])>>> np.logspace(0,4,5,endpoint=False)array([1.00000000e+00, 6.30957344e+00, 3.98107171e+01, 2.51188643e+02,       1.58489319e+03]#ç”Ÿæˆ1åˆ°128çš„ç­‰å·®æ•°åˆ—>>> np.logspace(0,7,8,base=2)array([  1.,   2.,   4.,   8.,  16.,  32.,  64., 128.])</code></pre><h2 id="2-3æ•°æ®ç±»å‹"><a href="#2-3æ•°æ®ç±»å‹" class="headerlink" title="2.3æ•°æ®ç±»å‹"></a>2.3æ•°æ®ç±»å‹</h2><p>åœ¨ä¸Šè¿°çš„å„ç§å‡½æ•°ä¸­ï¼Œå…¶å®éƒ½è¿˜æœ‰ä¸€ä¸ªå‚æ•°ï¼Œåå­—ä¸º<code>dtype</code>ï¼Œå®ƒå¯ä»¥ç”¨æ¥æŒ‡å®šæ•°ç»„ä¸­å…ƒç´ çš„ç±»å‹ï¼Œä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p><pre class=" language-py"><code class="language-py">>>> c=np.array([1,2,3,4])>>> carray([1, 2, 3, 4])>>> c.dtypedtype('int32')>>> d=np.array([1,2,3,4],dtype='float32')>>> darray([1., 2., 3., 4.], dtype=float32)</code></pre><p>è¿™é‡Œå†é™„ä¸Šnumpyé‡Œçš„æ•°æ®ç±»å‹è¡¨ï¼ˆè½¬è½½äº<a href="https://www.runoob.com/numpy/numpy-dtype.html">èœé¸Ÿæ•™ç¨‹</a>ï¼‰ï¼š<br>|åç§°|    æè¿°|<br>|:-:|:-:|<br>|bool_    |å¸ƒå°”å‹æ•°æ®ç±»å‹ï¼ˆTrue æˆ–è€… Falseï¼‰<br>|int_    |é»˜è®¤çš„æ•´æ•°ç±»å‹ï¼ˆç±»ä¼¼äº C è¯­è¨€ä¸­çš„ longï¼Œint32 æˆ– int64ï¼‰<br>|intc    |ä¸ C çš„ int ç±»å‹ä¸€æ ·ï¼Œä¸€èˆ¬æ˜¯ int32 æˆ– int 64<br>|intp    |ç”¨äºç´¢å¼•çš„æ•´æ•°ç±»å‹ï¼ˆç±»ä¼¼äº C çš„ ssize_tï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä»ç„¶æ˜¯ int32 æˆ– int64ï¼‰<br>|int8    |å­—èŠ‚ï¼ˆ-128 to 127ï¼‰<br>|int16    |æ•´æ•°ï¼ˆ-32768 to 32767ï¼‰<br>|int32    |æ•´æ•°ï¼ˆ-2147483648 to 2147483647ï¼‰<br>|int64    |æ•´æ•°ï¼ˆ-9223372036854775808 to 9223372036854775807ï¼‰<br>|uint8    |æ— ç¬¦å·æ•´æ•°ï¼ˆ0 to 255ï¼‰<br>|uint16    |æ— ç¬¦å·æ•´æ•°ï¼ˆ0 to 65535ï¼‰<br>|uint32    |æ— ç¬¦å·æ•´æ•°ï¼ˆ0 to 4294967295ï¼‰<br>|uint64    |æ— ç¬¦å·æ•´æ•°ï¼ˆ0 to 18446744073709551615ï¼‰<br>|float_    |float64 ç±»å‹çš„ç®€å†™<br>|float16    |åŠç²¾åº¦æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬ï¼š1 ä¸ªç¬¦å·ä½ï¼Œ5 ä¸ªæŒ‡æ•°ä½ï¼Œ10 ä¸ªå°¾æ•°ä½<br>|float32    |å•ç²¾åº¦æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬ï¼š1 ä¸ªç¬¦å·ä½ï¼Œ8 ä¸ªæŒ‡æ•°ä½ï¼Œ23 ä¸ªå°¾æ•°ä½<br>|float64    |åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬ï¼š1 ä¸ªç¬¦å·ä½ï¼Œ11 ä¸ªæŒ‡æ•°ä½ï¼Œ52 ä¸ªå°¾æ•°ä½<br>|complex_    |complex128 ç±»å‹çš„ç®€å†™ï¼Œå³ 128 ä½å¤æ•°<br>|complex64    |å¤æ•°ï¼Œè¡¨ç¤ºåŒ 32 ä½æµ®ç‚¹æ•°ï¼ˆå®æ•°éƒ¨åˆ†å’Œè™šæ•°éƒ¨åˆ†ï¼‰<br>|complex128    |å¤æ•°ï¼Œè¡¨ç¤ºåŒ 64 ä½æµ®ç‚¹æ•°ï¼ˆå®æ•°éƒ¨åˆ†å’Œè™šæ•°éƒ¨åˆ†ï¼‰</p>]]></content>
      
      
      
        <tags>
            
            <tag> numpy </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
